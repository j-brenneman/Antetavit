(function(q){q.execute(function(){q.when("A","jQuery","dp-js-logger","dp-ajax-prefetch-metrics").register("dp-ajax-prefetch",function(n,h,d,a){function b(o,b,e,l,f,c){this.scope=o;this.uniqueId=b;this.url=e;this.options=l;this.context=f;this.status=k;this.selected=!1;this.error=this.successData=this.xhr=this._status=void 0;this.chunks=[];this.doNotAbort=c||!1;this.prefetchMetrics=a.getInstance(this.scope)}var k=0,m=new d("dpAjaxPrefetch");b.prototype._callback=function(a,b,e,l,f){typeof a==="function"&&
a.call(self,b,e,l,f)};b.prototype._canAbort=function(){return!this.doNotAbort&&this.status===1};b.prototype._isAborted=function(){return this.status===3};b.prototype._getUniqueId=function(){return this.uniqueId};b.prototype._abort=function(){if(this.status===1)try{this.ajaxRequestRefence.abort(),this.status=3}catch(a){m.logFatal(a,{message:" Could not abort ajax request."})}};b.prototype._flushChunkData=function(){var a=this;a.chunks.length&&h.map(a.chunks,function(b){a._callback(a.options.chunk,
b,a.context)})};b.prototype._request=function(){var a=this;a.ajaxRequestRefence=n.get(a.url,{params:a.options.params,success:function(b,e,l){a.status=4;a.successData=b;a._status=e;a.xhr=l;a.selected&&a._callback(a.options.success,b,e,l,a.context)},error:function(b,e,l){a.status=2;a.xhr=b;a._status=e;a.error=l;a.selected&&a._callback(a.options.error,b,e,l,a.context)},abort:function(b){a.status=3;a.xhr=b;a.selected&&a._callback(a.options.abort,b,a.context)},chunk:function(b){b&&(a.chunks.push(b),a.selected&&
a._callback(a.options.chunk,b,a.context))},timeout:a.options.timeout||4E4})};b.prototype.prefetchContent=function(){this.prefetchMetrics.predicted(this.uniqueId);if(this.status===k)this.status=1,this._request()};b.prototype.getContent=function(a){a&&this.prefetchMetrics.selected(this.uniqueId);b._abortPrefetchesExcept(this);this.selected=!0;this.status===k?(this.status=1,this._request()):this.status===1?this._flushChunkData():this.status===4&&(this._flushChunkData(),this._callback(this.options.success,
this.successData,this._status,this.xhr,this.context))};b._objects={};b._abortPrefetchesExcept=function(a){h.each(b._objects[a.scope],function(b,e){e._canAbort()&&b!==a._getUniqueId()&&e._abort()})};b.getInstance=function(a,d,e,l,f,c){if(!a||!d||!e||typeof l!=="object")throw"Incorrect parameter passed.";b._objects[a]=b._objects[a]||{};var g=b._objects[a][d];g&&g._isAborted()&&(delete b._objects[a][d],g=void 0);g||(b._objects[a][d]=new b(a,d,e,l,f,c,this));return b._objects[a][d]};return b});q.register("dp-js-logger",
function(){return function(n){function h(a,b,d){b=b||{};typeof a==="string"&&(b.message+=a,a=void 0);b.logLevel=d;window.ueLogError&&window.ueLogError(a,b)}var d=this;d.attribution=n||"Twister";d.logFatal=function(a,b){h(a,b,"FATAL")};d.logError=function(a,b){h(a,b,"ERROR")};d.logCounter=function(a,b){window.ue&&window.ue.count&&ue.count(d.attribution+a,b)};d.consoleLog=function(a){window.console&&typeof Twister!=="undefined"&&Twister.printConsoleLogs&&console.log(a)}}});q.when("A","jQuery","dp-ajax-prefetch",
"twister-utils").register("dimensional-summary-module",function(n,h,d,a){return function(b){function k(j){if(c.initData.fnToDetermineSelectedVariations){if(typeof c.initData.fnToDetermineSelectedVariations==="function")c.currentDimCombOnGlance=c.initData.fnToDetermineSelectedVariations.call(c)}else c.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,c.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID;return j?c.currentDimCombOnGlance.split("_"):
c.currentDimCombOnGlance}function m(c,a){var f="",b,e;e=0;for(var o=c.length;e<o;e++)f=f+(e>0?",":"")+c[e];e=g.param(n.state("twisterjsDpxData"));f&&(b="/gp/twister/dimension?asinList="+f+"&isDimensionSlotsAjax=1&dimSubType="+a.dimSubType+(e?"&"+e:""));return b}function o(c){for(var a,f=0,b=c.length;f<b;f++)a=a+(f>0?",":"")+c[f];return a}function p(c,a){var f={indices:c,dimIndexTriggeringDimSum:a};f.dimCombOnPage=k();f.hashKey=e(a);return f}function e(j){var a=k(!0).slice(0);a[j]=c.symbolForTriggeringDim;
return a.join("_")}function l(j,a,f){for(var b=[],g=e(a),g=c.mapOfDimToAsinMaps[g],a=c.dimensionValuesList[a],o=0,l=j.length;o<=l;o++){var d=a[j[o]];d&&(d=g[d])&&(!c.asinDataCache||!c.asinDataCache[d]?b.push(d):f.chunk(c.asinDimSumCache[d]))}return b}function f(j,f){if(j){if(j.indices&&a.typeChecker.isArray(j.indices))var b=j.indices;else throw"Wrong parameter passed to DimSumModule "+c.scope;if(!j.chunk||!a.typeChecker.isFunction(j.chunk))throw"Wrong parameter passed to DimSumModule "+c.scope;}else throw error("No options for dimSum");
var g=l(b,f,j),b=p(b,f),e=c.scope,k=o(g),g=m(g,j),h={};if(j.params)h.params=j.params;h.chunk=function(a,f){if(a)a.dimensionValue=c.dimensionsList[f.dimIndexTriggeringDimSum]+"_"+c.dimensionValuesList[f.dimIndexTriggeringDimSum].indexOf(c.mapOfAsinToDimMaps[f.hashKey][a.ASIN]),j.chunk(a),c.asinDimSumCache[a.ASIN]=a};h.success=function(c,f,b,g){j.success&&a.typeChecker.isFunction(j.success)&&j.success(c,f,b,g)};h.error=function(){j.error&&a.typeChecker.isFunction(j.error)&&j.error()};h.abort=function(){j.abort&&
a.typeChecker.isFunction(j.abort)&&j.abort()};h.timeout=6E4;d.getInstance(e,k,g,h,b,!0).getContent()}var c=this,g=n.$;c.initData=b;c.scopePrefix="dpDimSum";c.symbolForTriggeringDim="*";c.uniqueID="";c.urlPrefix="";c.asinDataCache={};c.glanceViewSelectedDims="";c.currentDimCombOnGlance="";c.mapOfDimToAsinMaps={};c.mapOfAsinToDimMaps={};c.asinDimSumCache={};c.scope=c.scopePrefix+"_"+c.initData.scopeSuffix;c.dimensionsList=c.initData.dimensionsList;c.dimensionValuesList=c.initData.dimensionValuesList;
c.dimensionCombinationToASINMap=c.initData.dimensionCombinationToASINMap;k();c.fetchDimSumData=function(j){if(j.dimTriggeringDimSum&&a.typeChecker.isString(j.dimTriggeringDimSum))var b=j.dimTriggeringDimSum;else throw"Wrong parameter passes to DimSumModule "+c.scope;var b=c.dimensionsList.indexOf(b),g=k(!0);g[b]=c.symbolForTriggeringDim;var g=g.join("_"),e={},o={},l=c.dimensionValuesList[b];if(!c.mapOfDimToAsinMaps[g]){for(var d=0,p=l.length;d<p;d++){var m=g.replace(c.symbolForTriggeringDim,d);(m=
c.dimensionCombinationToASINMap[m])?(e[l[d]]=m,o[m]=l[d]):e[l[d]]=""}e&&(c.mapOfDimToAsinMaps[g]=e);o&&(c.mapOfAsinToDimMaps[g]=o)}f(j,b)}}});q.when("A","jQuery").register("detail-page-state-controller",function(){return function(){this.state={};this.getState=function(){return this.state};this.setState=function(n,h){n&&h&&(this.state[n]=h)}}});q.when("A","jQuery").register("detail-page-framework",function(){return{callbacks:{},registerCallback:function(n,h,d){n!="after_redraw"&&n!="asin_select"||
h!="sims-widget"&&h!="session-similarities"&&h!="purchase-similarities"&&h!="buyxgety"||(this.callbacks[h+"_feature_div"]=d)},registerFeature:function(){},registerFeatureConfig:function(){}}});q.when("A","twister-string-constants").register("twister-modal-resize-helper",function(n,h){return function(d){function a(a){a.each(function(a,e){var o=m(e);if(o.outerWidth()>b.width)b.width=o.outerWidth();if(o.outerHeight()>b.height)b.height=o.outerHeight()});return b}var b={width:0,height:0},k=this,m=n.$;
k.twisterModalHandle=d;k.fixSize=function(b){var d=a(b),e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l=k.twisterModalHandle.twisterModalDiv.outerWidth(),f=m(".slotRow_0").length,c=b.first().width(),c=f*(d.width-c);c>0&&f>0&&(newModalWidth=l+c,k.twisterModalHandle.setModalWidth(newModalWidth));Twister.isIE8?(b.each(function(c,j){m(j).css({"min-height":d.height+"px","min-width":d.width+"px"})}),1100<e&&m("."+h.CLASSNAME_FOR_INGRESS).css({"min-height":d.height+
"px"})):m("#"+h.DYNAMIC_STYLE_RULES_ID).html("."+h.CLASSNAME_FOR_SWATCH+" { min-height:"+d.height+"px; min-width:"+d.width+"px; } ."+h.CLASSNAME_FOR_INGRESS+" { height: "+d.height+"px;}")};k.resetBestSize=function(){b={width:0,height:0}}}});q.when("A","jQuery","twisterModule","dp-js-logger","page-refresh:controller","twister-controller","twister-state","twister-string-constants").register("detailPage:RefreshHandler",function(n,h,d,a,b,k,m,o){var p=window.twisterController.twisterModel.twisterState,
e=new a("dpPageRegreshHandler"),l={},f=function(c){var a=this;a.clientId=c;a.doPageRefresh=function(j){if(!Array.isArray(j))throw"Incorrect parameters passed to doPageRefresh for clientId "+a.clientId;j=p.getRequestContextForExternalTwisterUpdates(j);try{b.updatePage(j,o.EVENT_TYPE_CLICK)}catch(f){e.logFatal(f,{message:" Error doing page-refresh for clientId "+c})}};a.getURLParamObject=function(c,f,b){if(!c||b==null)throw"Incorrect parameters passed to getURLParams for clientId "+a.clientId;return{key:encodeURIComponent(c),
value:encodeURIComponent(f),isPersistent:b}}};return{getHandlerInstance:function(c){if(c==null||c=="")throw"Incorrect clientID passed to getHandlerInstance of dpRefreshHandler";l[c]||(l[c]=new f(c));return l[c]}}});q.when("A","jQuery","detailPage:RefreshHandler","twister-string-constants").register("your-module-name",function(n,h,d){window.handleClickForMyButton=function(){for(var a=[],b="",k="",m=0,o=arguments.length;m<o;m++)k=arguments[m],m==0?b=d.getHandlerInstance(k):(k=b.getURLParamObject(k[0],
k[1],k[2]),a.push(k));b.doPageRefresh(a)}});q.when("A","jQuery","dp-ajax-prefetch","detail-page-framework","dp-js-logger","twister-string-constants","page-refresh:meta-cache","page-refresh:page").register("page-refresh:controller",function(n,h,d,a,b,k,m,o){var p=4E4,e=1,l="dpTwister",f=1,c={intermediateEOS:1,EOS:1},g=1500,j=new b("dpTwister");return new function(){function b(c,a){if(!(a.recordImpressionPending>e)){var f=a.impressionCallbackData&&a.impressionCallbackData.relatedRequestID,o="/gp/twister/impression.html/?relatedRequestID="+
f;f?n.delay(function(){n.get(o,{success:function(){j.logCounter("dpTwisterImpression",1)},timeout:p,error:function(){j.logCounter("dpTwisterImpressionFailed",1)}})},g):j.logFatal("prefetchRequestId does not exists. twister prefetch ajax requests are not returning the metadata.");a.recordImpressionPending++;m.set(c,a)}}function u(c,a,j){if(typeof a.forceFullPrefetch==="undefined")a.forceFullPrefetch=j||k.NO,m.set(c,a);return a.forceFullPrefetch===k.NO&&z.metadata[c.mType]&&!z.metadata[c.mType].fullyPrefetchable}
function x(c,a){A(c,function(c){o.executeClientFeatures(c,a)})}function A(c,a){var j=[c];c.relatedContext&&j.push(c.relatedContext);h.each(j,function(c,j){a.apply(z,[j])})}function v(c,a){A(c,function(c){o.fadeInFeatures(c);var j=c.uniqueID,b=c.url;md=m.get(c);if(z.newPrefetchWeblab&&md.prefetchSent&&u(c,md))j=j+"_prefetch_"+f,b=b+"&prefetchParam="+f,md.hotFeaturesPending=!0;md.requestSent=!0;m.set(c,md);var g=z.newPrefetchWeblab&&a===k.EVENT_TYPE_CLICK;d.getInstance(l,j,b,w,c,c.doNotAbort).getContent(g)})}
var z=this;z.metadata={};z.newPrefetchWeblab=!1;z.page=o;var w={chunk:function(a,j){var f=a.ASIN,b=a.Value,g=a.FeatureName;if(!c[g]){var e=m.get(j);g==="twister-request-metadata"?(e.impressionCallbackData=n.parseJSON(b.content[g]),m.set(j,e)):o.refreshFeature(f,g,b)}},success:function(c,a,j,f){c=m.get(f);if(c.hotFeaturesPending)c.hotFeaturesPending=!1,m.set(f,c),d.getInstance(l,f.uniqueID+"_prefetch_2",f.url+"&prefetchParam=2",w,f,f.doNotAbort).getContent();c.recordImpressionPending&&b(f,c)},error:function(c,
a,f){Twister.$("#variations-overlay").hide();Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());j.logFatal(a+" "+f)},abort:function(c){j.logFatal(" Ajax aborted: "+c)},timeout:p};z.prefetchPage=function(c,a){A(c,function(c){var j=c.uniqueID,b=c.url,g=m.get(c);if(!g.requestSent)u(c,g,a)&&(j=j+"_prefetch_"+f,b=b+"&prefetchParam="+f),g.prefetchSent=!0,g.recordImpressionPending=g.recordImpressionPending||1,g.requestSent=!0,m.set(c,g),d.getInstance(l,j,b,w,c,c.doNotAbort).prefetchContent()})};
z.updatePage=function(c,j){if(j===k.EVENT_TYPE_CLICK||j===k.EVENT_TYPE_DROPDOWN_CHANGE){if(!c.partialState){if(a.callbacks["sims-widget_feature_div"])a.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());o.startMeasurement(c)}v(c,j)}x(c,j)};z.init=function(c){z.newPrefetchWeblab=c.newPrefetchWeblab;h.each(c.contextMetaData,function(c,a){if(a.elementList){for(var j=a.elementList.length,f=!0,b=0;b<j;b++)if(!a.elementList[b].isPrefetchable){f=!1;break}z.metadata[c]||(z.metadata[c]=
{});z.metadata[c].fullyPrefetchable=f}});o.init(c)}}});q.when("A","jQuery","page-refresh-measurement","twister-string-constants","dp-js-logger").register("page-refresh:page",function(n,h,d,a,b){var k=new b("dpTwister");return new function(){var b=this;b.measurement=void 0;b.config={partial:{},full:{},parent:{},master:{}};b.initializeMeasurement=function(a){var p=a.measurement;b.measurement=new d(h,p.atf.marker,p.cf.marker);b.measurement.init(a.storeID,a.productGroupID)};b.init=function(o){b.initializeMeasurement(o);
h.each(o.contextMetaData,function(o,e){var l=[],f={},c=e.elementList||[],g=c.length;f[a.EVENT_TYPE_MOUSEOVER]={};f[a.EVENT_TYPE_CLICK]={};for(var j=0;j<g;j++){var d=h("#"+c[j].divToUpdate);l.push("#"+c[j].divToUpdate);d.length&&c[j].customClientFunction&&(c[j].updateOnHover&&(f[a.EVENT_TYPE_MOUSEOVER][c[j].divToUpdate]=d.attr("customfunctionname")),f[a.EVENT_TYPE_CLICK][c[j].divToUpdate]=d.attr("customfunctionname"))}b.config[o].affectedFeatures=l.join(",");b.config[o].clientFeatures=f})};b.startMeasurement=
function(a){this.measurement.start(a.newAsin)};b.fadeInFeatures=function(a){h(this.config[a.mType].affectedFeatures).css({opacity:0.5})};b.executeClientFeatures=function(o,d){h.each(b.config[o.mType].clientFeatures[d===a.EVENT_TYPE_CLICK||d===a.EVENT_TYPE_DROPDOWN_CHANGE?a.EVENT_TYPE_CLICK:a.EVENT_TYPE_MOUSEOVER],function(a,d){try{eval("var twisterCustomFunction = "+d+";"),twisterCustomFunction(o.reactID,DetailPage.StateController,function(){b.measurement.stampImageLoad(o.newAsin)})}catch(f){k.logFatal(f)}})};
b.refreshFeature=function(a,b,e){var d,f;try{b&&e&&e.content&&(f=e.content[b],typeof f!=="undefined"&&(d=h("#"+b),d.html(f),d.css({opacity:""})))}catch(c){b=b||"NoFeatureName",k.logFatal(c,{message:" Error in feature "+b})}this.measurement.stampFeature(b,a)}}});q.when("twister-string-constants").register("page-refresh:meta-cache",function(n){return{data:{},set:function(h,d){var a=this.getKey(h);return a?this.data[a]=d:void 0},get:function(h){return this.data[this.getKey(h)]||{}},getKey:function(h){var d;
h&&h.newAsin&&(d=h.mType===n.MTYPE_PARENT?h.mType+h.newAsin:h.mType===n.MTYPE_MASTER?h.mType+h.id:h.mType+h.newAsin+h.reactID);if(!d)throw"Twister PageRefresh::MetaCache:getKey incorrect context passed.";return d}}});q.when("A","jQuery").register("page-refresh-ajax-scope",function(){return function(n,h,d){this.scopeName=h;this.url=d;ues("t0",h,window.newTwisterInteractionStartTime);ues("ctb",h,"1");this.signalMarker=function(a){this.markers[a]&&!(this.markers[a].conditions<=0)&&--this.markers[a].conditions===
0&&typeof this.markers[a].handler=="function"&&this.markers[a].handler()};this.addlongPoleTag=function(a,d){a=a.toLowerCase();this.markers[a]&&this.markers[a].conditions==0&&this.markers[a].conditions==0&&window.ue&&typeof ue.tag==="function"&&ue.tag(d)};this.postData=function(){var a=this.scopeName;n.ajax({url:this.url,dataType:"text",timeout:4E4,error:function(){},success:function(d){ues("id",a,d);uex("ld",a)}})};var a=this;this.markers={image:{conditions:1,handler:function(){uet("ne",h);a.signalMarker("af")}},
af:{conditions:Twister.atfMarkerCount?Twister.atfMarkerCount:2,handler:function(){uet("af",h);uet("cf",h);a.signalMarker("cf")}},cf:{conditions:Twister.cfMarkerCount?Twister.cfMarkerCount:2,handler:function(){uet("cf",h);a.postData()}}}}});q.when("A","jQuery").register("page-refresh-cache",function(){return function(){this.data={};this.getValue=function(n,h){return this.data[n]==null?null:h?this.data[n][h]:this.data[n]};this.setValue=function(n,h,d){if(this.data[n]==null||this.data[n].pending)this.data[n]=
{};this.data[n][h]=d};this.clear=function(n){this.data[n]=null}}});q.when("A","jQuery","page-refresh-refresh","page-refresh-measurement","page-refresh-model","detail-page-framework").register("page-refresh-manager",function(n,h,d,a,b,k){return function(m,o,p,e,l){this.$=m;this.model={};this.refresh=new d(m,e,l);this.contextMetaData=o;this.measurement=new a(m,p.atfMarker,p.cfMarker);this.init=function(a,c){for(var g in this.contextMetaData)this.model[g]=new b(m,this.contextMetaData[g].AJAXUrl,this.contextMetaData[g].elementList,
g.toString());this.measurement.init(a,c)};this.getModelCacheSize=function(a){var c=0;this.model.hasOwnProperty(a)&&m.each(this.model[a].cache.data,function(a,j){j.hasOwnProperty("cacheStatus")&&(j.cacheStatus==="preFetched"||j.cacheStatus==="completeFetched")&&c++});return c};this.react=function(a,c){for(var b in this.model)c||this.model[b].finishAjaxCall(this.model[b].currentRequestId,1);b=0;for(var j=a.length;b<j;b++){var e=a[b];c||this.model[e.type].finishAjaxCall(this.model[e.type].currentRequestId,
2);this.refresh.startRefresh(this.model[e.type].getUpdateData(this,e));this.model[e.type].makePendingCallBacks()}};this.pageRefreshHandler=function(a,c,b,j){if(!j.noRefresh)for(var e in j.content)try{this.refresh.doRefresh(e,j.content[e]);if(b.isFinishRefreshReq)if(this.refresh.finishRefresh(e),e=="session-similarities_feature_div"||e=="purchase-similarities_feature_div"||e=="buyxgety_feature_div"){if(k.callbacks[e])k.callbacks[e]()}else e==="zeroes-buy-box_feature_div"&&Twister.isIEBrowser(m)&&m("#"+
e).css({opacity:"",zoom:1});this.measurement.stampFeature(c,a)}catch(d){}}}});q.when("A","jQuery","page-refresh-ajax-scope").register("page-refresh-measurement",function(n,h,d){return function(a,b,k){this.atfMarker=b;this.cfMarker=k;this.scopeCount={};this.ajaxScopes={};this.url="";this.init=function(a,b){this.url="/gp/twister/dynamic-update/ajax-measurement.html/?s="+a+"&pgid="+b+"&deviceType="+Twister.deviceType;Twister.isInstaTwisterEnabled&&(this.url+="&ptd="+Twister.productTypeName)};this.start=
function(b){if(window.ue){this.scopeCount[b]||(this.scopeCount[b]=0);var o=b+(this.scopeCount[b]+1);this.scopeCount[b]++;this.ajaxScopes[b]=new d(a,o,this.url)}};this.stampImageLoad=function(a){this.ajaxScopes[a]&&(this.ajaxScopes[a].signalMarker("image"),Twister.cfImageLongPollTag&&this.ajaxScopes[a].addlongPoleTag("cf",Twister.cfImageLongPollTag))};this.stampFeature=function(a,b){this.ajaxScopes[b]&&(a===this.atfMarker&&this.ajaxScopes[b].signalMarker("af"),a===this.cfMarker&&(this.ajaxScopes[b].signalMarker("cf"),
Twister.cfHtmlLongPollTag&&this.ajaxScopes[b].addlongPoleTag("cf",Twister.cfHtmlLongPollTag)))};this.stampCustomMetrics=function(a,b){this.ajaxScopes[b]&&uet(a,this.ajaxScopes[b].scopeName)}}});q.when("A","jQuery","page-refresh-cache").register("page-refresh-model",function(n,h,d){return function(a,b,k,m){this.$=a;this.pendingCallBacks={};this.pendingCallBacksASIN="";this.cache=new d;this.AJAXUrl=b;this.AJAXRequests={};this.requestIdHash={};this.elementList=k;this.currentRequestId=null;this.pendingCallbacksList=
{};this.immediateCallbacksList=[];this.elementsToRefresh=[];this.modelType=m;this.getNewRequestId=function(){for(var a=0;a<100;a++){var b=a.toString();if(!this.requestIdHash.hasOwnProperty(b))return this.requestIdHash[b]=!0,b}};this.removeRequestId=function(a){typeof a!="string"&&(a=a.toString());this.requestIdHash.hasOwnProperty(a)&&delete this.requestIdHash[a]};this.executeActionItems=function(a,b,e,d,f){for(var e=e.divToUpdate,c=0,g=a.length;c<g;c++){var j=a[c];if(j=="addToImmediate")j={},j.id=
b,j.key=e,this.immediateCallbacksList.push(j);else if(j=="addToElementsRefresh"||j=="addToElementsRefreshWithLoading")f.push(e+(j=="addToElementsRefreshWithLoading"?",loadingBar":""));else if(j=="updateCache")j={handler:this,callbackType:"updateCache"},this.addToPendingCallbacksList(b,e,j);else if(j=="customClientFunction"){var j={handler:this,callbackType:"customClientFunction"},k={};k.refreshHandler=d;j.callbackParams=k;this.addToPendingCallbacksList(b,e,j)}else if(j=="doRefreshAndFinish"||j=="doRefresh")j=
{},j.handler=d,j.callbackType="doRefresh",k={isFinishRefreshReq:1},j.callbackParams=k,this.addToPendingCallbacksList(b,e,j)}};this.getAjaxCallContext=function(a,b,e,d,f,c){var b=[],g=f=0,j="notFetched";this.cache.getValue(a,"cacheStatus")&&(j=this.cache.getValue(a,"cacheStatus"));for(var k=0,u=this.elementList.length;k<u;k++){var m=this.elementList[k],h=m.divToUpdate,v=[],n=1,w=0,y=0,q=0;m.isPrefetchable=="0"&&(n=0,g=1);m.customClientFunction=="1"&&(w=1,n=0);m.updateOnHover=="1"&&(y=1);m.loadingBar==
"1"&&(q=1);if(!c||y){if(e)if(w||!n||this.cache.getValue(a,h))continue;else v.push("updateCache"),f||(f=1);else w?(v.push("customClientFunction"),v.push("addToImmediate")):this.cache.getValue(a,h)?(v.push("doRefresh"),v.push("addToImmediate")):(v.push("updateCache"),v.push("doRefreshAndFinish"),q?v.push("addToElementsRefreshWithLoading"):v.push("addToElementsRefresh"),f||(f=1));if((e==1&&j=="preFetched"||e==0&&j=="completeFetched"||e==1&&j=="completeFetched")&&f==1)f=0;this.executeActionItems(v,a,
m,d,b)}}if((e==1&&j=="preFetched"||e==0&&j=="completeFetched"||e==1&&j=="completeFetched")&&f==1)f=0;c&&f&&(f=0);f&&this.cache.setValue(a,"cacheStatus",e?g?"preFetching":"completeFetching":j=="preFetched"?"hotFeaturesFetching":"completeFetching");a={};a.isAjaxCallReq=f;a.elementsToRefresh=b;return a};this.getUpdateData=function(a,b){for(var e=b.idList,d=[],f=[],c=[],g=[],j=0,k,u,m,h,v,n=1,w=0,y=e.length;w<y;w++){u=e[w].id;m=e[w].asin;h=e[w].isPrefetch;k=e[w].requiredDivs;k=this.getAjaxCallContext(u,
m,h,a,k,e[w].isHover);v=k.elementsToRefresh;for(var q=0,C=v.length;q<C;q++)g.push(v[q]);if(k.isAjaxCallReq){j=1;h=h?1:this.cache.getValue(u,"cacheStatus")=="hotFeaturesFetching"?2:0;if(h==0||h==2)n=0;f.push(u);c.push(m);d.push(h)}}if(j){e={};e.asinList=c.join(",");e.id=f.join(",");e.prefetchParam=d.join(",");e.managerHandler=a;e.modelType=this.modelType;e.containsOnlyPrefetches=n;try{this.doAjaxCall(e)}catch(E){}}this.elementsToRefresh=g.slice();return g};this.makeCallback=function(a,b,e,d){var f=
e.handler,c=e.callbackType,e=e.callbackParams;d==null&&(d=this.cache.getValue(a,b));if(typeof f=="function")f(a,b,e,d);else if(c=="doRefresh")f.pageRefreshHandler(a,b,e,d);else if(c=="customClientFunction")try{f.callCustomClientFunction(a,b,e,d)}catch(g){}else c=="updateCache"&&f.updateCache(a,b,e,d)};this.makePendingCallBacks=function(a,b,e){var d;if(a){if(typeof this.pendingCallbacksList[a]==="object")if(b){d=this.pendingCallbacksList[a][b];if(!d){d=[];var f={handler:this,callbackType:"updateCache"};
d.push(f)}for(var c=0,g=d.length;c<g;c++){f=d[c];try{this.makeCallback(a,b,f,e)}catch(j){}}this.pendingCallbacksList[a][b]&&delete this.pendingCallbacksList[a][b]}else{for(f in this.pendingCallbacksList[a]){d=this.pendingCallbacksList[a][f];c=0;for(g=d.length;c<g;c++)this.makeCallback(a,b,callbackargs,e)}delete this.pendingCallbacksList[a]}}else{a=0;for(g=this.immediateCallbacksList.length;a<g;a++)b=this.immediateCallbacksList[a],this.makePendingCallBacks(b.id,b.key,null);this.immediateCallbacksList=
[]}};this.addToPendingCallbacksList=function(a,b,e){this.pendingCallbacksList.hasOwnProperty(a)||(this.pendingCallbacksList[a]={});this.pendingCallbacksList[a].hasOwnProperty(b)||(this.pendingCallbacksList[a][b]=[]);this.pendingCallbacksList[a][b].push(e)};this.doAjaxCall=function(a){Twister.useVariationsOverlay&&Twister.remainingAjaxCalls===0&&Twister.$("#variations-overlay").show();Twister.remainingAjaxCalls+=1;var b=this.getNewRequestId();this.currentRequestId=b;var e=a.managerHandler,d=this.AJAXUrl+
a.asinList+"&isFlushing=2&id="+a.id+"&prefetchParam="+a.prefetchParam+"&mType="+a.modelType;Twister.isInstaTwisterEnabled&&(d+="&dpEnvironment="+Twister.dpEnvironment);var f={};if(Twister.useAuiAjax){var c=this,d=Twister.A.ajax(d,{method:"get",chunk:function(a){c.AJAXHandler(null,a,AJAXFlushUtils.ajaxReadyState.LOADING)},success:function(){c.AJAXHandler(null,null,AJAXFlushUtils.ajaxReadyState.DONE);Twister.remainingAjaxCalls-=1;Twister.remainingAjaxCalls===0&&Twister.$("#variations-overlay").hide()},
error:function(){Twister.$("#variations-overlay").hide();Twister.remainingAjaxCalls-=1;Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());Twister.printConsoleLogs&&console.logs("ajax call failed")},timeout:4E4});f.streamingXhrRef=d}f.ajaxParams=a;f.managerHandler=e;this.AJAXRequests[b]=f};this.abortAllAjaxCalls=function(){for(requestId in this.requestIdHash)this.finishAjaxCall(requestId,!0)};this.finishAjaxCall=function(a,b){if(a){var e=this.AJAXRequests[a],
d=e.streamingXhrRef,f=e.ajaxParams,e=f.id.split(","),f=f.containsOnlyPrefetches;if(!(b==1&&f)){this.pendingCallbacksList={};this.immediateCallbacksList=[];if(b){d&&typeof d.abort==="function"&&d.abort(AJAXFlushUtils.ajaxHandlerCode.ABORT);d=0;for(f=e.length;d<f;d++)if(this.cache.getValue(e[d])){var c=this.cache.getValue(e[d],"cacheStatus");c=="preFetching"||c=="completeFetching"?b?this.cache.clear(e[d]):this.cache.setValue(e[d],"cacheStatus",c=="preFetching"?"preFetched":"completeFetched"):c=="hotFeaturesFetching"&&
this.cache.setValue(e[d],"cacheStatus",b?"preFetched":"completeFetched")}}this.elementsToRefresh=[];this.removeRequestId(a);delete this.AJAXRequests[a];this.currentRequestId=null}}};this.updateCache=function(a,b,e,d){b=="intermediateEOS"||b=="EOS"?(b=this.cache.getValue(a,"cacheStatus"),b=="preFetching"?this.cache.setValue(a,"cacheStatus","preFetched"):(b=="completeFetching"||b=="hotFeaturesFetching")&&this.cache.setValue(a,"cacheStatus","completeFetched")):this.cache.setValue(a,b,d)};this.callCustomClientFunction=
function(b,d,e){var l=a("#"+d).attr("customFunctionName");if(l){var f=e.refreshHandler,c=DetailPage.StateController.getState().current_asin,g=function(){f.measurement.stampImageLoad(c)},e=Twister.useAui?g:null;if(l=Twister.useAui?eval("var customFunction = "+l+"; customFunction")(b,DetailPage.StateController,e):eval(l)(b,DetailPage.StateController,e)){e={isFinishRefreshReq:0};if(!Twister.useAui){var j;if(d=="twister-main-image"&&c){j=document.getElementById("main-image");if(!j){var k=document.getElementById("main_image_0");
k&&(j=(j=k.getElementsByTagName("img"))?j[0]:null)}if(j)j.onload=g}}f.pageRefreshHandler(b,d,e,l);Twister.useAui||navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&j&&j.complete&&g()}}};this.AJAXHandler=function(a,b,d){if(d==AJAXFlushUtils.ajaxReadyState.DONE)return this.finishAjaxCall(this.currentRequestId,0),AJAXFlushUtils.ajaxHandlerCode.OK;for(a=0;a<1;a++){var l=b,d=l.ASIN,b=l.Value,l=l.FeatureName;l=="intermediateEOS"||l=="EOS"?this.updateCache(d,l,null,b):this.makePendingCallBacks(d,l,
b)}return AJAXFlushUtils.ajaxHandlerCode.OK};this.AJAXErrorHandler=function(a,b,d){(a=a.xhrStatus)||(a=d);return a}}});q.when("A","jQuery").register("page-refresh-refresh",function(){return function(n,h,d){this.$=n;this.loadingBarHtml=h;this.loadingBarHtml2=d;this.doRefresh=function(a,b){n("#"+a).html(b)};this.startRefresh=function(a){if(a)for(var b=0,d=a.length;b<d;b++){var m=a[b].split(","),h=m[0],p=!0,e=!1;if(h=="buy-box_feature_div"||h=="more-buying-choices_feature_div"||h=="session-similarities_feature_div"&&
n.browser.msie)p=!1;m.length>1&&m[1]=="loadingBar"&&(e=!0);p&&!Twister.useVariationsOverlay&&n("#"+h).css("opacity","0.5");e&&this.appendLoadingBar(h)}};this.appendLoadingBar=function(a){var b=n("#"+a);a!="moreBuyingChoices_feature_div"&&!b.attr("loadingBarSet")&&(b.attr("loadingBarSet","1"),a=="more-buying-choices_feature_div"?(b=n("#more-buying-choice-content-div"),b.html(this.loadingBarHtml2)):(a=b.find("h2, h1, b"),a.length>0&&(a=n(a[0]),a.css({display:"inline",padding:"0px"}),a.after(n(this.loadingBarHtml)))))};
this.finishRefresh=function(a){var b=!0,d=!0;a=="buy-box_feature_div"&&(d=b=!1);if(a=="session-similarities_feature_div"&&n.browser.msie||a=="more-buying-choices_feature_div")b=!1;var m="0";a=="more-buying-choices_feature_div"&&(m="1");b&&n("#"+a).css({opacity:"",zoom:m});d&&n("#"+a).removeAttr("loadingBarSet")}}});q.when("A").register("evdd-utils",function(){return function(){this.PopulateEVDD=function(n,h,d,a){var b={},k,m;for(k in n)m=d[k],typeof m!="undefined"&&(masterDimValIndex=m[0],slaveDimValIndex=
m[1],a==masterDimValIndex&&(b[slaveDimValIndex]=n[k]));typeof h.dimensionViewHandlersMap[1].updateViewWithPriceInfo==="function"&&h.dimensionViewHandlersMap[1].updateViewWithPriceInfo(b)}}});q.when("A","jQuery","dp-js-logger").register("dp-ajax-prefetch-metrics",function(n,h,d){function a(a){this.scope="dpPre"+a;this.data={}}new d("PrefetchMetrics");a.prototype._count=function(a,d){var m=this.scope+a,h;window.ue&&window.ue.count&&(h=typeof d!=="undefined"?(h=ue.count(m,d))||d:(h=ue.count(m))||0);
return h};a.prototype._incrementCounter=function(a){this._count(a,(this._count(a)||0)+1)};a.prototype._record=function(a,d,h){this.data[d]=this.data[d]||{};if(!this.data[d][a])this.data[d][a]=h||(new Date).getTime(),a=="predicted"?this._incrementCounter("Predicted"):a=="selected"&&this.data[d].predicted?(a=this.data[d].selected-this.data[d].predicted,this.data[d].lookahead=a,this._incrementCounter("PredictedSelect"),this._count("LookAhead"+this._count("PredictedSelect"),a),this._count("LookAhead",
a)):a=="selected"&&!this.data[d].predicted&&this._incrementCounter("UnpredictedSelect")};a.prototype.setCounter=function(a,d){this._count(a,d)};a.prototype.predicted=function(a,d){this._record("predicted",a,d)};a.prototype.selected=function(a,d){this._record("selected",a,d)};a._allInstances={};a.getInstance=function(b){if(!b)throw"Undefind scope. scope is a required parameter";a._allInstances[b]||(a._allInstances[b]=new a(b));return a._allInstances[b]};return a});q.when("A").register("scroll-event-handler",
function(n){return function(h,d,a){if(d){var b=n.$,k,m=(new Date).getTime();b(d).bind("scroll",function(b){var d=Date.now();k&&d-m<h&&clearTimeout(k);m=d;k=setTimeout(function(){a(b)},h)})}}});q.when("A","twister-utils","twister-string-constants").register("twister-beaconized-evdd",function(n,h,d){return function(a,b){function k(){var a=8+f(c).height(),j;j={localContent:g,location:"bottom",showOnHover:!1,showCloseButton:!1,skin:null,clone:!1,controlCallbacks:!0,locationOffset:[-2,-a],closeEventInclude:"CLICK_OUTSIDE",
forceAlignment:!0,group:"DonsBoxDropDowns",width:null};amznJQ.available("popover",function(){x=f(c).amazonPopoverTrigger(j)});f(document).bind("touchend click",function(){x.amznPopoverHide()})}function m(a){a=a.currentTarget.id.split("_");twisterController.handleClick({dimIndex:l.dimOrder,dimValueIndex:a[a.length-1]});return!1}function o(a){f(a.currentTarget).addClass(t)}function p(a){f(a.currentTarget).removeClass(t);return!1}function e(a){f(a.currentTarget).removeClass(t);m(a);return!1}var l=this,
f=n.$,c,g,j,t="evdd-row-hovered",u,x,A={};l.dimType="evdd";l.isMasterDim=!1;l.updateView=function(a){var b=h.getDimStyleData(a.dimCombID,l.dimValuesDisplayData.length,l.dimOrder,l.twisterControllerHandle.twisterAvailabilityCache,l.displayConfigStylesData),d,g,e,m=-1,a=0,m="";x.amznPopoverHide();for(var k=0,t=b.length;k<t;k++)d=b[k],g=A[d.style],e="#"+l.dimName+"_"+k,g==="evdd-row-selected"&&(m=k,m=l.dimValuesDisplayData[m]),(d.style==="available"||d.style==="selected")&&a++,$rowElement=f(e),$rowElement.removeClass(u).addClass(g),
$rowElement.find(".evdd-row-snake-wrapper").show(),$rowElement.find(".evdd-row-price-info-wrapper").html(""),$rowElement.find(".evdd-row-prime-badge-wrapper").html("");b=!1;!l.isMasterDim&&a===1&&(b=!0);a=b;f(c).find("button").text(m);f(j).text(m);a?(f(c).addClass("evdd-hidden"),f(j).removeClass("evdd-hidden")):(f(j).addClass("evdd-hidden"),f(c).removeClass("evdd-hidden"))};l.updateViewWithPriceInfo=function(a){var c,j,b;for(c in a)j=a[c],b="#"+l.dimName+"_"+c,b=f(b),b.find(".evdd-row-snake-wrapper").hide(),
b.find(".evdd-row-price-info-wrapper").html(j[2]),b.find(".evdd-row-prime-badge-wrapper").html(j[3])};(function(){var a;l.dimOrder=b[d.STRING_DIM_ORDER];l.dimName=b[d.STRING_DIM_NAME];l.dimensionsMap=b[d.STRING_DIMENSIONS_MAP];l.dimNameDisplayString=b[d.STRING_DIMENSION_DISPLAY_STRING];l.dimValuesDisplayData=b[d.STRING_DIMENSION_VALUES_DATA];l.displayConfigStylesData=b[d.STRING_DISPLAY_CONFIG_STYLES_DATA];l.twisterControllerHandle=b[d.STRING_TWISTER_CONTROLLER_HANDLE];l.initialTwisterState=b[d.STRING_TWISTER_INITIAL_STATE_KEY];
a=l.initialTwisterState.getCurrentDimCombID();l.dimData=h.getDimStyleData(a,l.dimValuesDisplayData.length,l.dimOrder,l.twisterControllerHandle.twisterAvailabilityCache,l.displayConfigStylesData);l.isMasterDim=!1;if(l.dimOrder==="0")l.isMasterDim=!0;l.dimNameDisplayString=b[d.STRING_DIMENSION_DISPLAY_STRING];c="#evdd-button-"+l.dimName;g="#evdd-table-wrapper-"+l.dimName;j="#evdd-singleton-"+l.dimName;A.invalid=l.isMasterDim?"evdd-row-default":"evdd-row-hidden";A.available="evdd-row-default";A.selected=
"evdd-row-selected";u=["evdd-hidden",t,"evdd-row-hidden evdd-row-default evdd-row-selected"].join(" ");k();for(var x=0,n=l.dimData.length;x<n;x++)a="#"+l.dimName+"_"+x,f(a).bind("click",m).bind("touchend",e).bind("touchstart",o).bind("mouseenter",o).bind("mouseleave",p)})()}});q.when("A","twister-variations-data","twister-view","twister-model","twister-model-new","twister-state","twister-availabilty-cache","twister-utils","evdd-utils","twister-logger").register("twister-controller",function(n,h,d,
a,b,k,m,o,p,e){return function(l,f){var c=this,g=n.$;c.logger=new e(g,this);c.logger.init();c.twisterJSInitData=f;c.pageRefreshRefactor=f.pageRefreshRefactor;c.twisterVariationsData=new h(f);c.twisterAvailabilityCache=new m(c.twisterVariationsData);c.initTwisterState=new k(f,c.twisterVariationsData,c.twisterAvailabilityCache);c.twisterView=new d(c,c.initTwisterState,f,c.twisterVariationsData,c.twisterAvailabilityCache);c.twisterModel=c.pageRefreshRefactor?new b(c,f,c.twisterVariationsData):new a(c,
l,f,c.twisterVariationsData,c.twisterAvailabilityCache);(function(){g(".variations .swatchOuter a").each(function(){var a=jQuery(c).contents();g(c).replaceWith(a)});if(typeof TwisterNonJs!=="undefined")for(var a=TwisterNonJs.handleDropDown.length,b=0;b<a;b++)TwisterNonJs.handleDropDown[b]=function(){};g("#twister .swatches a").remove();g("#twisterNonJsData").html("");c.jsInteractionEnabledTime=Date.now()})();c.populateEVDD=function(a){var c=this.twisterView,b=this.twisterVariationsData.asinToDimIndexMapData,
f=this.twisterModel.twisterState.getMaster();a&&(new p).PopulateEVDD(a,c,b,f)};c.handleClick=function(a){this.divMetaData=a;var b=c.initTwisterState.getCurrentDimCombID(),b=o.reconstructCombinationWithDimValue(b,a.dimIndex,a.dimValueIndex);window.newTwisterInteractionStartTime=new Date;window.ue&&ue.tag&&ue.tag("twisterSwatchClick");if(!this.twisterVariationsData.useMS){if(o.isSwatchSelected(a,c.twisterVariationsData))return;var f=o.getAttachedClass(a);f!=="swatchHover"&&f!=="swatchUnavailableHover"&&
this.twisterModel.twisterState.setPreHoverData(a)}this.enableMouseOut=0;this.twisterModel.handleClick(a);c.twisterAvailabilityCache.isDimCombinationAvailable(b)||c.logger.logImpression(c.logger.eventTypes.CLICK_NA,null)};c.handleClickPrediction=function(a,c){this.twisterModel.prefetch(a,c)};c.handleMouseOver=function(a){if(typeof touchDeviceDetected!="undefined"&&touchDeviceDetected)return this.handleClick(a),!0;this.enableMouseOut=1;this.twisterModel.handleMouseOver(a);return!0};c.handleMouseOut=
function(a,c,b){this.enableMouseOut===1&&this.twisterModel.handleMouseOut(a,c,b)};c.handleDropdownOnChange=function(a,c){c.dimValueIndex=parseInt(a.value.split(",")[0]);window.newTwisterInteractionStartTime=new Date;window.ue&&ue.tag&&ue.tag("twisterDDClick");this.twisterModel.twisterState.setPreHoverData(c);this.twisterModel.handleDropdownChange(c)}}});q.when("A","twister-vodd","twister-beaconized-evdd","twister-native-evdd","twister-dimension-views-swatch","twister-dimension-views-dropdown","twister-dimension-views-singleton",
"twister-string-constants").register("twister-dimension-view-factory",function(n,h,d,a,b,k,m,o){var p=n.$;return{getDimensionSubViewObject:function(e,l,f,c,g){var j,t=e.dimensionsDisplayType[f],u=e.dimensionsDisplaySubType[f],x=e.dimensions[f],A=e.dimensions,n=e.dimensionsDisplay[f],z=l.dimensionValuesData[f],l=l.displayConfigStylesData[t],w=e.maxSwatchesForImmersiveView[f];t===o.TWISTER_DIMENSION_VIEW_SWATCH?j=b:t===o.TWISTER_DIMENSION_VIEW_DROPDOWN?j=k:t===o.TWISTER_DIMENSION_VIEW_SINGLETON?j=m:
t===o.TWISTER_DIMENSION_VIEW_EVDD?j=p("html").hasClass("a-lt-ie8")?a:d:t===o.TWISTER_DIMENSION_VIEW_VODD&&(j=h);t={};t[o.STRING_DIM_ORDER]=f;t[o.STRING_DIM_NAME]=x;t[o.STRING_DIMENSIONS_MAP]=A;t[o.STRING_DIMENSION_DISPLAY_STRING]=n;t[o.STRING_DIMENSION_VALUES_DATA]=z;t[o.STRING_DISPLAY_CONFIG_STYLES_DATA]=l;t[o.STRING_TWISTER_CONTROLLER_HANDLE]=c;t[o.STRING_TWISTER_INITIAL_STATE_KEY]=g;t[o.STRING_MAX_SWATCHES_IMMERSIVE_VIEW]=w;t.dimensionDisplaySubType=u;return new j(e,t)}}});q.when("A","cf","twister-js-init-mason-data",
"twister-js-init-dpx-data","twister-controller","page-refresh-manager","dimensional-summary-module").execute(function(n,h,d,a,b,k,m){function o(){typeof amznJQ!="undefined"&&amznJQ.declareAvailable("newTwister");q.register("twisterModule",function(){return{getState:function(){return DetailPage.StateController.getState()}}});typeof amznJQ!="undefined"&&(amznJQ.declareAvailable("pageRefreshJS"),amznJQ.declareAvailable("dpf"))}function p(a){var b={};a.extend(b,{ajaxReadyState:{NONE:-1,UNSENT:0,OPENED:1,
HEADERS_RECEIVED:2,LOADING:3,DONE:4},ajaxHandlerCode:{OK:0,IGNORE:1,RETRY:2,RELOAD:3,TIMEOUT:4,ABORT:5,FATAL:6,INVALID_RESP:7,INCOMPLETE_RESP:8,PAGELET_FATAL:9,DEBUG_NOAJAX:10},serverCode:{ERROR:-1,OK:200,TIMEOUT:408},shouldReload:function(){return!1}});window.AJAXFlushUtils=b}window.Twister={};var e=window.Twister;e.$=n.$;e.DimensionViews={};n.on.ready(function(){e.A=n;if(!n.$.isEmptyObject(a)){var l=a.updateDivLists;e.dpEnvironment=a.dpEnvironment;e.isInstaTwisterEnabled=!0;e.productTypeName=d.productTypeName;
e.isImmersiveViewEnabled=a.isImmersiveViewEnabled?a.isImmersiveViewEnabled:!1;var f=d.contextMetaData,c=f.full,g=f.master,j=f.parent,f=f.partial;d.dimensionSelectionData=a.dimensionSelectionData;d.dimensionsDisplayType=a.dimensionsDisplayType;d.dimensionsDisplaySubType=a.dimensionsDisplaySubType?a.dimensionsDisplaySubType:[];d.ajaxUrlParams=a.ajaxUrlParams;d.maxSwatchesForImmersiveView=a.maxSwatchesForImmersiveView?a.maxSwatchesForImmersiveView:[];if(typeof a.twisterUpdateURLAppend!=="undefined"){var h=
d.twisterUpdateURLInfo,u=h.immutableURLPrefix,x=h.immutableParams,A=a.twisterUpdateURLAppend.immutableParams,v;for(v in A)if(typeof A.hasOwnProperty!=="function"||A.hasOwnProperty(v))u+=(u.indexOf("?")==-1?"?":"&")+v+"="+A[v],x[v]=A[v];h.immutableURLPrefix=u}if(a.shouldUseDPXTwisterData)d.dimToAsinMapData=a.dimensionToAsinMap,d.asinToDimIndexMapData=a.asinToDimensionIndexMap,d.dimensionValuesData=a.dimensionValuesData,d.variation_values=a.variationValues,d.asin_variation_values=a.asinVariationValues,
d.reactId=a.reactId,d.currentDimCombID=a.currentDimensionCombinationId,d.selected_variation_values=a.selectedVariationValues;l.full!=null&&(c.elementList=c.elementList!=null?l.full.concat(c.elementList):l.full);l.master!=null&&(g.elementList=g.elementList!=null?l.master.concat(g.elementList):l.master);l.parent!=null&&(j.elementList=j.elementList!=null?l.parent.concat(j.elementList):l.parent);l.partial!=null&&(f.elementList=f.elementList!=null?l.partial.concat(f.elementList):l.partial)}l=d.isTablet;
window.twisterInitPrefetchMode=d.twisterInitPrefetchMode;window.jqupgrade=d.jqupgrade;e.useDropdownThumbnail=l;e.useVariationsOverlay=l;e.showErrorMessageOnFailure=l;e.remainingAjaxCalls=0;e.errorMessageOnFailure="We are sorry.  Amazon has encountered an error.  Please try again.";e.isLoggingEnabled=d.isLoggingEnabled;e.printConsoleLogs=d.printConsoleLogs;e.deviceType=d.deviceType;e.useAui=1;e.useAuiAjax=1;l=d.measurement.atf.marker;e.atfMarkerCount=d.measurement.atf.count;c=d.measurement.cf.marker;
e.cfMarkerCount=d.measurement.cf.count;e.cfImageLongPollTag=d.measurement.cf.longPollImageTag;e.cfHtmlLongPollTag=d.measurement.cf.longPollHtmlTag;l=new k(n.$,d.contextMetaData,{atfMarker:l,cfMarker:c,logChannel:"twister"},d.loadingBarHtml,d.loadingBarHtml2);window.twisterController=new b(l,d);o();if(e.isImmersiveViewEnabled)l={},l.dimensionsList=d.dimensions,l.dimensionValuesList=d.dimensionValuesData,l.dimensionCombinationToASINMap=d.dimToAsinMapData,l.scopeSuffix="twister",e.dimensionalSummaryModule=
new m(l);p(n.$)});e.isIEBrowser=function(a){return a.browser.msie||!!navigator.userAgent.match(/Trident/)};e.isIE8=function(){var a=e.A.$;return a("html").hasClass("a-lt-ie9")};return e});q.when("A","twister-state","twister-utils","detail-page-framework","twister-string-constants").register("twister-model",function(n,h,d,a){return function(b,h,m,o,n){function e(a){var c,b,f,d,e,h=g.twisterState.parentASIN,m;a?(c=g.twisterState.reactId,b=g.twisterState.hoveredReactId,f=g.twisterState.unselectedDimCount,
d=g.twisterState.hoveredDimCombID.search(/X/)>=0?1:0,e=g.twisterState.hoveredAsin):(c=g.twisterState.previousReactId,b=g.twisterState.reactId,f=g.twisterState.previousPartialState,d=g.twisterState.partialState,e=g.twisterState.getCurrentASIN());m=g.twisterVariationsData.asinToDimIndexMapData[e];g.twisterVariationsData.useMS&&m&&e&&l(g.fetchMasterIDList,"m"+m[0],e,0,a);d===0?(l(g.fetchFullIDList,e,e,0,a),g.prioritizeReqPrefetch=0):f===0?(l(g.fetchPartialIDList,b,e,0,a),l(g.fetchParentIDList,h,h,0,
a),g.prioritizeReqPrefetch=1):c!==b&&l(g.fetchPartialIDList,b,e,0,a)}function l(a,c,b,f,d){d||(d=0);if(g.idsList[c]!=1&&c&&b&&(!g.prefetchFixWeblab||!(b===g.twisterState.parentASIN&&a.type==="full"))&&a)g.idsList[c]=1,a.data.push({id:c,asin:b,isPrefetch:f,isHover:d})}function f(a){a||(a=0);var c=[];g.fetchParentIDList.data.length>0&&c.push({type:"parent",idList:g.fetchParentIDList.data});g.fetchPartialIDList.data.length>0&&c.push({type:"partial",idList:g.fetchPartialIDList.data});g.fetchFullIDList.data.length>
0&&c.push({type:"full",idList:g.fetchFullIDList.data});g.fetchMasterIDList.data.length>0&&c.push({type:"master",idList:g.fetchMasterIDList.data});c.length>0&&(a||g.pageRefresh.measurement.stampCustomMetrics("ns",g.twisterState.currentASIN),g.pageRefresh.react(c,a));g.fetchParentIDList.data=[];g.fetchPartialIDList.data=[];g.fetchFullIDList.data=[];g.fetchMasterIDList.data=[];g.idsList={};g.prefetchCount=0}function c(a,c){for(var b={},f="",e=0;e<c.length;e++)f=null,g.twisterState.isDimSelected(e)&&
(f=c[e],f==="(Please Select)"&&(f=null)),f!==null&&(f=d.htmlUnescape(f)),b[g.viewHandle.dimensionsMap[e]]=f;DetailPage.StateController.setState(a+"_variations",b)}var g=this;g.twisterControllerHandle=b;g.pageRefresh=h;g.twisterJSInitData=m;g.twisterVariationsData=o;g.twisterAvailabilityCache=n;g.prefetchCount=0;g.preHoverClass="";g.fetchParentIDList={type:"parent",data:[]};g.fetchPartialIDList={type:"partial",data:[]};g.fetchFullIDList={type:"full",data:[]};g.fetchMasterIDList={type:"master",data:[]};
g.idsList={};g.prefetchFixWeblab=0;g.prioritizeReqPrefetch=0;g.handleMouseOver=function(a){var b;if(a!==null&&(g.twisterState.updateStateOnMouseOver(a),!d.isSwatchSelected(a,g.twisterVariationsData)||g.twisterVariationsData.useMS))b=g.twisterVariationsData.getDimensionValuesDisplayData(g.twisterState.hoveredAsin),g.twisterVariationsData.useMS||c("hovered",b),this.viewHandle.updateView(a,g.twisterState,"mouseOver"),e(1),f(1)};g.handleDropdownChange=function(a){g.handleClick(a)};g.handleClick=function(b,
l,u){var h=u?"mouseOut":"click",m=0,k=l,o=g.twisterState.getCurrentASIN();g.twisterVariationsData.useMS&&b&&d.isSwatchSelected(b,g.twisterVariationsData)&&(m=1);u||(u=0);if(!(k===null&&b===null)&&g.twisterState.updateStateOnClick(b,l,h)){k=g.twisterState.getCurrentASIN();if(!u&&o!==k&&!g.twisterState.partialState&&a.callbacks["sims-widget_feature_div"])a.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());!g.twisterState.partialState&&!u&&g.pageRefresh.measurement.start(k);
b=g.twisterVariationsData.getDimensionValuesDisplayData(k);c("selected",b);c("hovered",b);!g.twisterState.partialState&&!u&&g.pageRefresh.measurement.stampCustomMetrics("bb",k);g.viewHandle.updateView({},g.twisterState,h);!g.twisterState.partialState&&!u&&g.pageRefresh.measurement.stampCustomMetrics("be",k);m!==1&&(e(u),f(u))}};g.handleMouseOut=function(a){var c=g.twisterState.getCurrentASIN();(g.twisterVariationsData.useMS||!d.isSwatchSelected(a,g.twisterVariationsData))&&g.handleClick(null,c,1)};
(function(){var a;if(g.twisterJSInitData){g.twisterState=g.twisterControllerHandle.initTwisterState;g.MAX_PREFETCH_COUNT=g.twisterJSInitData.prefetchCount;g.prioritizeReqPrefetch=g.twisterJSInitData.prioritizeReqPrefetch;g.prefetchFixWeblab=g.twisterJSInitData.prefetchFixWeblab;a=g.twisterState.getCurrentASIN();a=g.twisterVariationsData.getDimensionValuesDisplayData(a);if(!g.viewHandle)g.viewHandle=g.twisterControllerHandle.twisterView;c("selected",a);c("hovered",a)}g.pageRefresh.init(g.twisterJSInitData.storeID,
g.twisterJSInitData.productGroupID)})()}});q.when("A","jQuery","twister-state","twister-utils","twister-string-constants","page-refresh:controller").register("twister-model-new",function(n,h,d,a,b,k){return function(d,h,p){function e(c,d,j,e){if((!d||f.twisterVariationsData.useMS||!a.isSwatchSelected(d,f.twisterVariationsData))&&f.twisterState.updateStateOnClick(d,j,e,c)){d=f.twisterVariationsData.getDimensionValuesDisplayData(j);if(!(e!=b.EVENT_TYPE_CLICK&&e!=b.EVENT_TYPE_DROPDOWN_CHANGE)){for(var j=
f.twisterState.getCurrentDimCombID().split("_"),u={},h=0,m=f.twisterState.dimensionSelectionData.length;h<m;h++)u[f.twisterState.twisterJSInitData.dimensions[h]]=f.twisterState.dimensionSelectionData[h].isRequired=="1"&&f.twisterState.dimensionSelectionData[h].isSelected=="0"&&j[h]==="X"?"-1":j[h];DetailPage.StateController.setState("selected_variation_values",u)}l("selected",d);l("hovered",d);f.viewHandle.updateView({},f.twisterState,e);k.updatePage(c,e)}}function l(a,b){for(var j={},d="",e=0;e<
b.length;e++)d=null,f.twisterState.isDimSelected(e)&&(d=b[e],d==="(Please Select)"&&(d=null)),j[f.viewHandle.dimensionsMap[e]]=d;DetailPage.StateController.setState(a+"_variations",j)}var f=this;f.twisterControllerHandle=d;f.twisterJSInitData=h;f.twisterVariationsData=p;f.pageRefresh=k.page;f.prefetch=function(a,b){var j=f.twisterState.getRequestContext(a,!0);k.prefetchPage(j,b)};f.handleMouseOver=function(c){if(!c||f.twisterVariationsData.useMS||!a.isSwatchSelected(c,f.twisterVariationsData)){var d=
f.twisterState.getHoverContext(c);f.twisterState.updateStateOnMouseOver(c,d);var j=f.twisterVariationsData.getDimensionValuesDisplayData(d.newAsin);(!f.twisterVariationsData.useMS||c&&c.dimDisplayType===b.TWISTER_DIMENSION_VIEW_VODD)&&l("hovered",j);this.viewHandle.updateView(c,f.twisterState,b.EVENT_TYPE_MOUSEOVER);k.updatePage(d,b.EVENT_TYPE_MOUSEOVER)}};f.handleClick=function(a){var d=f.twisterState.getRequestContext(a);e(d,a,d.childAsin,b.EVENT_TYPE_CLICK)};f.handleMouseOut=function(a){a=f.twisterState.getCurrentContext(a);
e(a,null,a.currentAsin,b.EVENT_TYPE_MOUSEOUT)};f.handleDropdownChange=function(a){var d=f.twisterState.getRequestContext(a);e(d,a,d.childAsin,b.EVENT_TYPE_DROPDOWN_CHANGE)};(function(){if(f.twisterJSInitData){if(!f.viewHandle)f.viewHandle=f.twisterControllerHandle.twisterView;f.twisterState=f.twisterControllerHandle.initTwisterState;var a=f.twisterState.getCurrentASIN(),a=f.twisterVariationsData.getDimensionValuesDisplayData(a);l("selected",a);l("hovered",a);k.init(h);n.on("dp:twister:prefetch",function(a,
c){f.prefetch(a,c)})}})()}});q.when("A","twister-utils","twister-string-constants").register("twister-native-evdd",function(n,h,d){return function(a,b){var k=this,m=n.$,o;k.dimType="evdd";k.isMasterDim=!1;k.updateView=function(a){var a=h.getDimStyleData(a.dimCombID,k.dimValuesDisplayData.length,k.dimOrder,k.twisterControllerHandle.twisterAvailabilityCache,k.displayConfigStylesData),b,d="";m(o).empty();for(var f=0,c=a.length;f<c;f++)if(rowData=a[f],b=rowData.style,b!=="invalid"||k.isMasterDim)b=b===
"selected"?"selected":"",rowId="#native-"+k.dimName+"_"+f,b='<option id="'+rowId+'" value="'+f+'," '+b+">"+k.dimValuesDisplayData[f]+"</option>",d+=b;m(o).html(d)};k.dimOrder=b[d.STRING_DIM_ORDER];k.dimName=b[d.STRING_DIM_NAME];k.dimValuesDisplayData=b[d.STRING_DIMENSION_VALUES_DATA];k.isMasterDim=!1;if(k.dimOrder==="0")k.isMasterDim=!0;k.dimNameDisplayString=b[d.STRING_DIMENSION_DISPLAY_STRING];k.displayConfigStylesData=b[d.STRING_DISPLAY_CONFIG_STYLES_DATA];k.twisterControllerHandle=b[d.STRING_TWISTER_CONTROLLER_HANDLE];
o="#evdd-select-"+k.dimName;m(o).change(function(){var a=m(o).val(),a=parseInt(a.split(",")[0]);twisterController.handleClick({dimIndex:k.dimOrder,dimValueIndex:a})})}});q.when("A","twister-utils","detail-page-state-controller","twister-string-constants").register("twister-state",function(n,h,d,a){return function(b,k,m){function o(c){if(c.mType===a.MTYPE_PARENT&&c.relatedContext)c=c.relatedContext;return c}function p(c,b,j){var d=t.extend(!0,{},c);d.mType=a.MTYPE_MASTER;d.id="m"+j[0];d.relatedContext=
c;d.doNotAbort=!0;d.url=e(d,b,[]);d.uniqueID=l(d,[]);return d}function e(a,c,b){var d=j.twisterJSInitData.twisterUpdateURLInfo,f=d.immutableURLPrefix,e=d.immutableParams,d=d.mutableParams,g=j.twisterJSInitData.contextMetaData[a.mType].mTypeSpecificURLParams,h={};keyItr=0;h=t.extend(!0,{},d,g);if(b!=null)for(var g=0,l=b.length;g<l;g++){var m=b[g];if(!e.hasOwnProperty(m.key)){var k=m.key,o=m.value;h[k]=o;m.isPersistent&&(d[k]=o)}}for(var n in h)h[n]!=null&&(f+="&"+n+"="+h[n]);f+="&asinList="+a.newAsin+
"&isFlushing=2&dpEnvironment="+Twister.dpEnvironment+"&id="+a.id+"&mType="+a.mType;c&&(f+="&prefetchRequest=1");return f}function l(a,c){var b="",d=a.mType,f=[],e=t.extend(!0,{},j.twisterJSInitData.twisterUpdateURLInfo.mutableParams);if(c!=null)for(var g=0,h=c.length;g<h;g++){var l=c[g];e[l.key]=l.value}for(var m in e)e.hasOwnProperty(m)&&f.push(m);f.sort();g=0;for(h=f.length;g<h;g++)l=f[g],l!=null&&e!=null&&(b+=l+"="+e[l]+"&");b+="mType="+d+"&id="+a.id;return b}function f(c){var b=c[a.STRING_DIM_INDEX],
d=c[a.STRING_DIM_VALUE_INDEX],c=j.getCurrentDimCombID().split("_");c[b]=d===-1?"X":d;c=c.join("_");return j.twisterAvailabilityCache.gAsinToRender(c,b)}function c(c,b){var d=j.getCurrentDimCombID().split("_"),f=d.length,e=j.twisterVariationsData.asinToDimIndexMapData[c],g=-1,h;if(e)e=e.slice(0);else{e=[];for(h=0;h<f;h++)e[h]="X"}b!==null&&b!==void 0&&(g=b[a.STRING_DIM_INDEX]);for(var l=0;l<f;l++)(h=j.dimensionSelectionData[l][a.STRING_IS_REQUIRED])&&l.toString()!==g&&e[l]!=d[l]&&(e[l]="X");parseInt(g)!==
-1&&parseInt(b[a.STRING_DIM_VALUE_INDEX])===-1&&(e[g]="X");return e.join("_")}function g(c,b){for(var d=c.split("_"),f=0;f<j.dimensionSelectionData.length;f++)j.dimensionSelectionData[f][a.STRING_IS_REQUIRED]===1&&b!==0&&(d[f]="X");return d.join("_")}var j=this,t=n.$;j.twisterJSInitData=b;j.twisterVariationsData=k;j.twisterAvailabilityCache=m;j.parentASIN="";j.currentASIN="";j.dimensionSelectionData={};j.unselectedDimCount=-1;j.master="";j.currentDimCombID="";j.preHoverClass="";j.hoveredReactId="";
j.hoveredAsin="";j.hoveredDimCombID="";j.partialState="";j.previousPartialState="";j.previousReactId="";j.previousAsin="";j.setMaster=function(a){j.master=a};j.getMaster=function(){return j.master};j.getCurrentASIN=function(){return j.currentASIN};j.setCurrentASIN=function(a){if(a)j.currentASIN=a};j.getCurrentDimCombID=function(){return j.currentDimCombID};j.setCurrentDimCombID=function(a){if(a)j.currentDimCombID=a};j.isDimSelected=function(c){return j.dimensionSelectionData[c][a.STRING_IS_SELECTED]===
1};j.setPreHoverData=function(c){if(!j.useMS)j.preHoverClass=h.getAttachedClass(c,j.twisterVariationsData.dimensionsMap[c[a.STRING_DIM_INDEX]])};j.updateStateOnMouseOver=function(b,d){var e,h;b&&b[a.STRING_DIM_INDEX]==="0"&&j.setMaster(b[a.STRING_DIM_VALUE_INDEX]);e=d&&d.childAsin||f(b);h=j.unselectedDimCount;if(e===""){if(h<=0)return;e=j.getCurrentASIN()}j.hoveredAsin=e;e=d&&d.newDimCombID||c(j.hoveredAsin,b);j.hoveredDimCombID=e;h=e.search(/X/)>=0?1:0;e=d&&d.reactID||g(e,h);j.hoveredReactId=e;j.setPreHoverData(b)};
j.updateStateOnClick=function(b,d,e,h){var l=-1,m=-1;j.previousAsin=j.getCurrentASIN();d=d||h&&h.childAsin||f(b);b&&b[a.STRING_DIM_INDEX]&&b[a.STRING_DIM_INDEX]==="0"&&j.setMaster(b[a.STRING_DIM_VALUE_INDEX]);l=j.unselectedDimCount;j.previousPartialState=l;if(d===""){if(l<=0)return!1;d=j.getCurrentASIN()}l=h&&h.newDimCombID||c(d,b);if(a.EVENT_TYPE_CLICK===e||a.EVENT_TYPE_DROPDOWN_CHANGE===e){if(typeof j.preHoverClass!=="undefined"&&(j.preHoverClass.indexOf(a.CLASS_FOR_SWATCH_UNAVAILABLE)!==-1||j.preHoverClass.indexOf(a.CLASS_FOR_DROPDOWN_UNAVAILABLE)!==
-1)||b[a.STRING_DIM_VALUE_INDEX]===-1)for(var e=l.split("_"),k=0,o=j.dimensionSelectionData.length;k<o;k++)m=j.dimensionSelectionData[k],e[k]==="X"&&m[a.STRING_IS_SELECTED]===1&&(m[a.STRING_IS_SELECTED]=0,j.unselectedDimCount++);e=b[a.STRING_DIM_INDEX];if(b!==null&&b!==void 0&&(e=j.dimensionSelectionData[e],e[a.STRING_IS_SELECTED]===0&&parseInt(b[a.STRING_DIM_VALUE_INDEX])!==-1&&(e[a.STRING_IS_SELECTED]=1,j.unselectedDimCount--,j.unselectedDimCount<0)))j.unselectedDimCount=0;m=j.unselectedDimCount;
j.previousReactId=j.reactId}else m=l.search(/X/)>=0?1:0,j.previousReactId=j.hoveredReactId;b=h&&h.reactID||g(l,m);j.partialState=m;j.setCurrentASIN(d);j.setCurrentDimCombID(l);j.reactId=b;DetailPage.StateController.setState("current_asin",j.getCurrentASIN());DetailPage.StateController.setState("currentDimCombID",j.getCurrentDimCombID());DetailPage.StateController.setState("reactId",j.reactId);DetailPage.StateController.setState("dimensionSelectionData",j.dimensionSelectionData);return!0};j.getCurrentContext=
function(){var a=j.getRequestContext();return o(a)};j.getHoverContext=function(a){a=j.getRequestContext(a);return o(a)};j.getRequestContext=function(b,d){var h=j.getCurrentASIN(),m=j.parentASIN,k;k=b&&f(b)||h;var o=j.getCurrentDimCombID(),n=c(k,b),q=o.search(/X/)>=0?1:0,C=n.search(/X/)>=0?a.MTYPE_PARTIAL:a.MTYPE_FULL;if(!q&&C===a.MTYPE_PARTIAL)C=a.MTYPE_PARENT;var q=C!==a.MTYPE_FULL?1:0,E=g(n,q),h={divMetaData:b,currentAsin:h,newAsin:k,childAsin:k,currentDimCombID:o,newDimCombID:n,reactID:E,partialState:q,
mType:C,id:E.search(/X/)>=0?E:k};if(j.useMS&&k){if(m=j.twisterVariationsData.asinToDimIndexMapData[k])h.relatedContext=p(h,d,m),h.doNotAbort=!0}else if(C===a.MTYPE_PARENT)k=t.extend(!0,{},h),k.mType=a.MTYPE_PARTIAL,k.relatedContext=h,k.url=e(k,d,[]),k.doNotAbort=!0,k.uniqueID=l(k,[]),h.relatedContext=k,h.id=m,h.newAsin=m,h.doNotAbort=!0;h.url=e(h,d,[]);h.uniqueID=l(h,[]);return h};j.getRequestContextForExternalTwisterUpdates=function(c){var b=j.getCurrentASIN(),d=j.getCurrentDimCombID();d.search(/X/);
var f=d.search(/X/)>=0?a.MTYPE_PARTIAL:a.MTYPE_FULL,h=f!==a.MTYPE_FULL?1:0,k=g(d,h),d={divMetaData:{},currentAsin:b,newAsin:b,childAsin:b,currentDimCombID:d,newDimCombID:d,reactID:k,partialState:h,mType:f,id:k.search(/X/)>=0?k:b};if(j.useMS&&b&&(b=j.twisterVariationsData.asinToDimIndexMapData[newAsin]))d.relatedContext=p(d,0,b),d.doNotAbort=!0;d.url=e(d,0,c);d.uniqueID=l(d,c);return d};(function(){var c=j.twisterJSInitData,b=c.keysToPopulateDetailPageStateController,f;if(c){DetailPage.StateController=
new d;for(var e=0,g=b.length;e<g;e++)f=b[e],DetailPage.StateController.setState(f,c[f]);DetailPage.StateController.setState("variation_display_labels",c[a.INIT_DATA_VARIATIONS_DISPLAY_LABELS]);DetailPage.StateController.setState("variation_label_order",c[a.INIT_DATA_DIMENSIONS_MAP]);j.currentASIN=c.current_asin;j.parentASIN=c.parent_asin;j.dimensionSelectionData=c.dimensionSelectionData;j.unselectedDimCount=c.unselectedDimCount;j.currentDimCombID=c.currentDimCombID;j.reactId=c.reactId;j.storeID=c.storeId;
j.productGroupID=c.productGroupId;j.useMS=c[a.STRING_USE_MS];j.useMS&&j.currentASIN&&j.twisterVariationsData.asinToDimIndexMapData[j.currentASIN]&&j.setMaster(j.twisterVariationsData.asinToDimIndexMapData[j.currentASIN][0])}})()}});q.when("A","twister-string-constants").register("twister-variations-data",function(n,h){return function(d){var a=this;a.twisterJSInitData=d;a.dimensionValuesDisplay={};a.getDimensionValuesDisplayData=function(b){var d=a.dimensionValuesDisplay[b];!d&&b==a.deletedLandingAsinInfo.asin&&
(d=a.deletedLandingAsinInfo.dimValues);return d};(function(){var b=a.twisterJSInitData;a.dimensionsMap=b[h.INIT_DATA_DIMENSIONS_MAP];a.dimensionValuesDisplay=b[h.INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA];a.deletedLandingAsinInfo=b[h.INIT_DATA_DELETED_LANDING_ASIN_INFO];a.dimToAsinMapData=b[h.INIT_DATA_DIM_TO_ASIN_MAP];a.asinToDimIndexMapData=b[h.INIT_DATA_ASIN_TO_DIM_INDEX_MAP];a.dimensionsDisplayType=b[h.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];a.dimensionValuesData=b[h.STRING_DIMENSION_VALUES_DATA];
a.displayConfigStylesData=b[h.STRING_DISPLAY_CONFIG_STYLES_DATA];a.useMS=b[h.STRING_USE_MS];a.hoverMS=b[h.STRING_HOVER_MS]})()}});q.when("A","twister-dimension-view-factory","twister-string-constants").register("twister-view",function(n,h,d){return function(a,b,k,m,o){var p=this,e=n.$;p.twisterControllerHandle=a;p.twisterJSInitData=k;p.twisterVariationsData=m;p.twisterAvailabilityCache=o;p.dimensionsMap={};p.dimensionDisplayMap={};p.dimensionDisplayTypeMap={};p.dimensionViewHandlersMap={};p.updateView=
function(a,b,c){var e={},j,h=b.dimensionSelectionData;c===d.EVENT_TYPE_MOUSEOVER?(j=b.hoveredAsin,b=b.hoveredDimCombID):(j=b.getCurrentASIN(),b=b.getCurrentDimCombID());e[d.STRING_DIMENSION_VALUES_DATA]=p.twisterVariationsData.getDimensionValuesDisplayData(j);e[d.STRING_DIMENSION_DISPLAY_MAP]=p.dimensionDisplayMap;e[d.STRING_DIMENSIONS_MAP]=p.dimensionsMap;j={};var k={};j[d.STRING_EVENT_TYPE]=c;j[d.STRING_DIM_COMB_ID]=b;k[d.STRING_EVENT_DIV_METADATA]=a;k[d.STRING_EVENT_DIM_INFO]=e;k[d.STRING_DIMENSION_SELECTION_DATA]=
h;j[d.STRING_EVENT_DATA]=k;a=0;for(c=p.dimensionsMap.length;a<c;a++)p.dimensionViewHandlersMap[a].updateView(j)};(function(a){var b=p.twisterJSInitData;p.dimensionsMap=b[d.INIT_DATA_DIMENSIONS_MAP];p.dimensionDisplayMap=b[d.INIT_DATA_DIMENSIONS_DISPLAY];p.dimensionDisplayTypeMap=b[d.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];for(var c=0,g=p.dimensionsMap.length;c<g;c++)b=h.getDimensionSubViewObject(p.twisterJSInitData,p.twisterVariationsData,c.toString(10),p.twisterControllerHandle,a),p.dimensionViewHandlersMap[c]=
b;e(d.CLASS_FOR_NON_JS_EVDD).hide();e(d.CLASS_FOR_NEW_TWISTER_EVDD).show()})(b)}});q.when("A","a-dropdown","twister-thumbnailModule","twister-utils","twister-string-constants").register("twister-dimension-views-dropdown",function(n,h,d,a,b){return function(k,m){function o(){var a=b.DROPDOWN_DIV_NAME+e.dimName,c={},d;c[b.STRING_DIM_INDEX]=e.dimOrder;d=function(a){e.twisterControllerHandle&&e.twisterControllerHandle.handleDropdownOnChange(a,c)};q.when("A").execute(function(c){c.on(b.AUI_DROPDOWN_EVENT_PREFIX+
a,d)})}function p(d){var c,g,j,h;g=b.ID_SELECTOR+e.dimName+b.CHAR_UNDERSCORE+b.INDEX_FOR_SELECT_OPTION;var k=b.NATIVE_DROPDOWN_DIV_PREFIX+b.DROPDOWN_DIV_NAME+e.dimName,m=l(k).val().split(",")[0],o=d[b.STRING_EVENT_TYPE],n=d[b.STRING_EVENT_DATA][b.STRING_DIMENSION_SELECTION_DATA],d=a.getDimStyleData(d.dimCombID,e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,e.displayConfigStylesData);n[e.dimOrder][b.STRING_IS_SELECTED]===0&&m!==b.INDEX_FOR_SELECT_OPTION&&
typeof e.AuiDropdownHandle!=="undefined"&&e.AuiDropdownHandle.getSelect(k).val("-1");(o===b.EVENT_TYPE_CLICK||o===b.EVENT_TYPE_DROPDOWN_CHANGE)&&n[e.dimOrder][b.STRING_IS_REQUIRED]===0&&n[e.dimOrder][b.STRING_IS_SELECTED]===1&&l(g).remove();m=0;for(n=d.length;m<n;m++)if(c=d[m],g=b.NATIVE_DROPDOWN_DIV_PREFIX+e.dimName+b.CHAR_UNDERSCORE+m,c=c[b.STRING_STYLE],j=l(g).get(0).className,c===b.CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION&&(h=l(g).attr("value"),l(k).val()!==h&&e.AuiDropdownHandle.getSelect(k).val(h)),
j!==c)try{j={},j[b.STRING_CSS_CLASS]=c,j[b.STRING_NATIVE_CSS_CLASS]=c,e.AuiDropdownHandle.updateOption(g,j)}catch(p){}e.isTablet&&(o===b.EVENT_TYPE_CLICK||o===b.EVENT_TYPE_DROPDOWN_CHANGE)&&e.thumbnailHandle&&e.thumbnailHandle.update(e.dimName)}var e=this,l=n.$;e.dimType="dropdown";e.AuiDropdownHandle=h;e.thumbnailHandle=d;e.updateView=function(a){a[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_MOUSEOUT?p(a):(a[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_CLICK||a[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_DROPDOWN_CHANGE)&&
p(a)};(function(){var d;e.dimOrder=m[b.STRING_DIM_ORDER];e.dimName=m[b.STRING_DIM_NAME];e.dimensionsMap=m[b.STRING_DIMENSIONS_MAP];e.dimNameDisplayString=m[b.STRING_DIMENSION_DISPLAY_STRING];e.dimValuesDisplayData=m[b.STRING_DIMENSION_VALUES_DATA];e.twisterControllerHandle=m[b.STRING_TWISTER_CONTROLLER_HANDLE];e.displayConfigStylesData=m[b.STRING_DISPLAY_CONFIG_STYLES_DATA];e.initialTwisterState=m[b.STRING_TWISTER_INITIAL_STATE_KEY];e.isTablet=k.isTablet;d=e.initialTwisterState.getCurrentDimCombID();
e.dimStyleData=a.getDimStyleData(d,e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,e.displayConfigStylesData);o();if(e.isTablet)for(var c=0,g=e.dimensionsMap.length;c<g;c++)d=e.dimensionsMap[c],e.thumbnailHandle.attach(d),e.thumbnailHandle.preloadAllThumbnails(d)})()}});q.when("A").register("twister-dimension-views-singleton",function(){return function(){this.updateView=function(){}}});q.when("A","twister-dimension-views-unavailablePopover","twister-utils",
"twister-string-constants","twister-dimension-views-ingress","twister-logger").register("twister-dimension-views-swatch",function(n,h,d,a,b,k){return function(m,o){function p(b,d){DetailPage.StateController.getState();var e;if(c.twisterIngressHandle)e=c.twisterIngressHandle.modalHandle.twisterModalDiv;d?(g("#variation_"+c.dimName+" .selection").html(b).addClass("hover"),e&&e.length>0&&g("#"+a.TWISTER_MODAL_ID_PREFIX+c.dimName+" .selection").html(b).addClass("hover")):(g("#variation_"+c.dimName+" .selection").html(b).removeClass("hover"),
e&&e.length>0&&g("#"+a.TWISTER_MODAL_ID_PREFIX+c.dimName+" .selection").html(b).removeClass("hover"))}function e(b){var d=c.isImmersiveViewEnabled?g("."+a.TWISTER_SWATCH_CLASS_PREFIX+c.dimName+a.CHAR_UNDERSCORE+b):g(a.ID_SELECTOR+c.dimName+a.CHAR_UNDERSCORE+b),b=[],e;if(d.length>0)for(var b=d.get(0).className.split(" "),d=0,f=b.length;d<f;d++){var h=b[d];if(h.indexOf("swatch")===0){e=h;break}}return e}function l(b,d,e){b=c.isImmersiveViewEnabled?g("."+a.TWISTER_SWATCH_CLASS_PREFIX+c.dimName+a.CHAR_UNDERSCORE+
b):g(a.ID_SELECTOR+c.dimName+a.CHAR_UNDERSCORE+b);d!==e&&g(b).removeClass(d).addClass(e)}function f(b,d){var e=c.isImmersiveViewEnabled?g("."+a.TWISTER_SWATCH_CLASS_PREFIX+c.dimName+a.CHAR_UNDERSCORE+b+" ."+a.PRICE_SLOT_CLASS_NAME):g(a.ID_SELECTOR+c.dimName+a.CHAR_UNDERSCORE+b+"_price"),f=a.CLASS_FOR_PRICE_SECONDARY;if(d===a.CLASS_FOR_SWATCH_SELECT||d===a.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||d===a.CLASS_FOR_SWATCH_HOVER)f=a.CLASS_FOR_PRICE_SELECTED;e.length&&e.removeClass(a.CLASS_FOR_PRICE_SECONDARY+
" "+a.CLASS_FOR_PRICE_SELECTED).addClass(f)}var c=this,g=n.$;c.dimType="swatch";c.dimSubType="";c.twisterJSInitData=m;c.newPrefetchWeblab=!1;c.logger=new k(g,this);c.logger.init();c.updateView=function(b){if(b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_MOUSEOVER){var g,k,m,o,n=b[a.STRING_EVENT_DATA],q=n[a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][c.dimOrder],n=n[a.STRING_EVENT_DIV_METADATA];if(c.dimOrder==n[a.STRING_DIM_INDEX]){var w=e(n[a.STRING_DIM_VALUE_INDEX]),y=d.getDimStyleData(b.dimCombID,
c.dimValuesDisplayData.length,c.dimOrder,c.twisterControllerHandle.twisterAvailabilityCache,c.displayConfigStylesData);g=c.twisterJSInitData;k={};k.hidePopover=g.hidePopover;k.unavailablePopOverStringValue=g.unavailablePopOverStringValue;k.showDimSecondUnavailablePopover=g.showDimSecondUnavailablePopover;parseInt(n[a.STRING_DIM_INDEX])===parseInt(c.dimOrder)&&w===a.CLASS_FOR_SWATCH_UNAVAILABLE&&!c.twisterJSInitData[a.STRING_HIDE_POPOVER]&&h.triggerPopover(b,k);p(q,!0);b=0;for(q=y.length;b<q;b++)if(g=
y[b],g=g[a.STRING_STYLE],k=e(b),m=k===a.CLASS_FOR_SWATCH_SELECT?!0:!1,o=parseInt(n[a.STRING_DIM_INDEX])===parseInt(c.dimOrder)&&parseInt(n[a.STRING_DIM_VALUE_INDEX])===parseInt(b)?!0:!1,!m&&(w!==a.CLASS_FOR_SWATCH_UNAVAILABLE||o))g===a.CLASS_FOR_SWATCH_SELECT&&(g=k===a.CLASS_FOR_SWATCH_UNAVAILABLE?a.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:a.CLASS_FOR_SWATCH_HOVER,f(b,g)),l(b,k,g)}}else{eventData=b[a.STRING_EVENT_DATA];eventDimInfo=eventData[a.STRING_EVENT_DIM_INFO];dimensionValueDisplay=eventDimInfo[a.STRING_DIMENSION_VALUES_DATA][c.dimOrder];
divMetaData=eventData[a.STRING_EVENT_DIV_METADATA];dimensionSelectionData=eventData[a.STRING_DIMENSION_SELECTION_DATA];dimCombID=b.dimCombID;dimDataForThisInteraction=d.getDimStyleData(dimCombID,c.dimValuesDisplayData.length,c.dimOrder,c.twisterControllerHandle.twisterAvailabilityCache,c.displayConfigStylesData);p(dimensionValueDisplay,!1);n=0;for(w=dimDataForThisInteraction.length;n<w;n++){y=dimDataForThisInteraction[n];y=y[a.STRING_STYLE];if(dimensionSelectionData[c.dimOrder][a.STRING_IS_SELECTED]===
0&&y===a.CLASS_FOR_SWATCH_SELECT)y=a.CLASS_FOR_SWATCH_AVAILABLE;if(b=e(n))b=e(n),l(n,b,y),f(n,y)}}};c.isImmersiveViewEnabled=Twister.isImmersiveViewEnabled;c.newPrefetchWeblab=c.twisterJSInitData.newPrefetchWeblab;c.dimOrder=o[a.STRING_DIM_ORDER];c.dimName=o[a.STRING_DIM_NAME];c.dimensionsMap=o[a.STRING_DIMENSIONS_MAP];c.dimNameDisplayString=o[a.STRING_DIMENSION_DISPLAY_STRING];c.dimValuesDisplayData=o[a.STRING_DIMENSION_VALUES_DATA];c.displayConfigStylesData=o[a.STRING_DISPLAY_CONFIG_STYLES_DATA];
c.twisterControllerHandle=o[a.STRING_TWISTER_CONTROLLER_HANDLE];c.initialTwisterState=o[a.STRING_TWISTER_INITIAL_STATE_KEY];currDimCombID=c.initialTwisterState.getCurrentDimCombID();c.dimData=d.getDimStyleData(currDimCombID,c.dimValuesDisplayData.length,c.dimOrder,c.twisterControllerHandle.twisterAvailabilityCache,c.displayConfigStylesData);c.maxSwatchLimitForImmersive=o[a.STRING_MAX_SWATCHES_IMMERSIVE_VIEW];c.dimSubType=o.dimensionDisplaySubType;c.finalLimitForSwatches=c.maxSwatchLimitForImmersive-
1;(function(){n.declarative(c.isImmersiveViewEnabled?a.AUI_EVENT_FOR_SWATCHTHUMB+"-"+c.dimOrder:a.AUI_EVENT_FOR_SWATCHTHUMB,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE,a.EVENT_TYPE_MOUSEDOWN,a.EVENT_TYPE_TOUCHSTART],function(b){if(b.type===a.EVENT_TYPE_CLICK){if(c.twisterControllerHandle&&(c.twisterControllerHandle.handleClick(b.data),c.twisterIngressHandle)){c.twisterIngressHandle.modalHandle.isModalOpen&&c.logger.logImpression(c.logger.eventTypes.IMMERSIVE_SWATCH_CLICK,null);
var e=c.twisterIngressHandle.modalHandle.twisterModalDiv,f=g(b.$target).parents().closest("li"),h=f.attr("id"),b=g("#"+h);if(e.has(f)&&h.indexOf(a.MODAL_SWATCH_PREFIX)===0){e=c.finalLimitForSwatches-1-1;f=g("#variation_"+c.dimName+" > ul > li");if(b.index()>e&&(g(f.get(c.finalLimitForSwatches-1)).remove(),h=h.replace(a.MODAL_SWATCH_PREFIX,""),g(b.clone().attr("id",h)).insertAfter(f.get(e)),d.isSmallerWidthScreen()&&(f=g("#"+h),f.length>0))){b=f.find(".twisterSwatchWrapper");h=f.find(".twisterSlotDiv");
e=f.find(".twisterImageDiv");f=f.find(".twisterTextDiv");if(e.length>0)e.removeClass("twisterImageDiv"),e.get(0).className="twisterImageDivWrapper";else if(f.length>0)f.removeClass("twisterTextDiv"),f.get(0).className="text";h.length>0&&(g(h).removeClass("addTwisterPadding"),g(h).removeClass("twisterSlotDiv"),h.css("display","none"));if(b.length>0)b.get(0).style.minWidth="100%",b.get(0).style.minHeight="100%"}c.twisterIngressHandle.modalHandle.closeTwisterModal()}}}else if(b.type===a.EVENT_TYPE_MOUSEENTER)c.twisterControllerHandle&&
c.twisterControllerHandle.handleMouseOver(b.data);else if(b.type===a.EVENT_TYPE_MOUSELEAVE)c.twisterControllerHandle&&c.twisterControllerHandle.handleMouseOut(b.data,b.data[a.STRING_DIM_INDEX],b.data[a.STRING_DIM_VALUE_INDEX]);else if(c.newPrefetchWeblab&&(b.type===a.EVENT_TYPE_MOUSEDOWN||b.type===a.EVENT_TYPE_TOUCHSTART))c.twisterControllerHandle&&c.twisterControllerHandle.handleClickPrediction(b.data,c.newPrefetchWeblab==="T1"?a.YES:a.NO)})})();(function(){for(var b,d,g=0,h=c.dimData.length;g<h;g++)if(b=
c.dimData[g],d=e(g))b=b[a.STRING_STYLE],l(g,d,b),f(g,b)})();(function(){if(g("#twister_ingress_"+c.dimName).length>0){var a={};a.dimName=c.dimName;a.dimOrder=c.dimOrder;a.dimData=c.dimData;a.dimensionsMap=c.dimensionsMap;a.dimNameDisplayString=c.dimNameDisplayString;a.dimValuesDisplayData=c.dimValuesDisplayData;a.maxSwatchLimitForImmersive=c.maxSwatchLimitForImmersive;a.dimSubType=c.dimSubType;c.twisterIngressHandle=new b(a)}})()}});q.when("A","twister-utils","twister-string-constants","scroll-event-handler",
"a-popover").register("twister-vodd",function(n,h,d,a,b){return function(k,m){function o(c){K=!1;var b=c.popover.$trigger,d={popover:c};c.popover.$container.hasClass($)||c.popover.$container.addClass($);b.trigger(ta,d);I||(L=B.closest(".a-popover-inner"),I=new a(ua,L,u));c=B.find("tr."+W);L&&L.length&&L.scrollTop(c.get(0).offsetTop-va)}function p(a){if(D){var c=D.length/r.dimValuesDisplayData.length*100,c={divMetaData:q(null),count:Math.ceil(r.dimValuesDisplayData.length/M),percentage:Math.floor(c),
dimDisplayType:d.TWISTER_DIMENSION_VIEW_VODD};H.logImpression(a,c)}}function e(a){var c=a.popover.$trigger,a={popover:a};K||(p(F.SCROLL),D=null);K=!0;c.blur();c.trigger(wa,a)}function l(a){a.popover.$trigger.trigger(xa,{popover:a})}function f(){var a={closeButton:!1,position:"triggerBottom",name:N,activate:h.isTouchDevice()?"onmouseover":"onclick"},c=B.find("tr");c.length&&c.length>M&&s.extend(a,{height:ya});J=b.create(r.dimensionButton,a);n.on("a:popover:afterShow:"+N,o);n.on("a:popover:afterHide:"+
N,e);n.on("a:popover:afterUpdatePosition:"+N,l);r.dimensionButton.bind(h.isTouchDevice()?d.EVENT_TYPE_TOUCHEND:d.EVENT_TYPE_CLICK,function(){if(J.isActive())return J.hide(),!1;else H.logImpression(F.CLICK,{time:Date.now()}),h.isTouchDevice()&&r.dimensionButton.trigger("mouseenter")})}function c(){f();S.each(function(a,c){s(c).bind(d.EVENT_TYPE_CLICK,v).bind(d.EVENT_TYPE_MOUSEENTER,y).bind(d.EVENT_TYPE_MOUSELEAVE,G).bind(d.EVENT_TYPE_TOUCHSTART,w).bind(d.EVENT_TYPE_TOUCHEND,z)})}function g(a){var c=
H.createFunctionTimer(F.DIM_SUM_LOAD);c.start();var b=function(){s.each(a,function(a,c){O.splice(s.inArray(c,O),1)});c.stop()},d=aa+a.join(za);n.ajax(d,{chunk:function(a){a&&s.isArray(a)&&(s.each(a,function(a,c){r.initialTwisterState.asinDimensionValuesInfo[c.asin]=c}),t(a))},success:function(){c.stop()},error:b,abort:b,timeout:Aa})}function j(a){var c=r.initialTwisterState.getCurrentDimCombID(),b=parseInt(r.dimensionOrder),d=[],e=[];D||(D=[]);for(var f=0;f<a.length;f++){d.length===Ba&&(g(d),d=[]);
var j=x(a[f].id);combination=h.reconstructCombinationWithDimValue(c,b,j);asin=ba[combination];D.indexOf(j)<0&&D.push(j);asin&&(s.inArray(asin,O)>-1||(d.push(asin),O.push(asin)),r.initialTwisterState.asinDimensionValuesInfo[asin]&&e.push(r.initialTwisterState.asinDimensionValuesInfo[asin]))}d.length>0&&g(d);e.length>0&&t(e)}function t(a){a&&s.each(a,function(a,c){var b=Q[c.asin][parseInt(r.dimensionOrder)],b=B.find(X+b);s(b).find("."+Y).hide();c&&(c.isAvailable?(c.hasFreshBadge?s(b).find("i."+ca).removeClass(T):
c.hasPrimeBadge&&s(b).find("i."+da).removeClass(T),c.isPriceHidden?s(b).find("."+ea).show():c.price&&s(b).find("."+fa).text(c.price).show(),c.ppu&&s(b).find("."+ga).text(c.ppu).show(),c.isSnsEligible&&!c.hasFreshBadge&&s(b).find("."+ha).show()):c.availability?s(b).find("."+ia).html(c.availability).show():s(b).find("."+ja).show(),s(b).find("."+ka).show())})}function u(a){a=h.getVisibleTableRows(a.currentTarget,B.find("tr"));j(a)}function x(a){if(!a)return-1;a=a.split(d.CHAR_UNDERSCORE);return a[a.length-
1]}function q(a){return{dimIndex:r.dimensionOrder,dimValueIndex:a?x(a.id):null,dimDisplayType:d.TWISTER_DIMENSION_VIEW_VODD}}function v(a){p(F.CLICK_VARIATION);K||p(F.SCROLL);K=!0;D=null;var c=q(a.currentTarget),b=r.initialTwisterState.getCurrentDimCombID(),b=h.reconstructCombinationWithDimValue(b,c.dimIndex,c.dimValueIndex);r.twisterControllerHandle&&r.twisterControllerHandle.handleClick(c);b=r.twisterControllerHandle.twisterAvailabilityCache.isDimCombinationAvailable(b);c={dimensionOrder:r.dimensionOrder,
dimensionValueIndex:c.dimValueIndex,isSelectedDimValueAvailable:b};s(a.currentTarget).trigger(Ca,c)}function z(a){var c=B.getBoundingClientRect().top-(r.containerLocation||0);if(h.isTouchDevice()&&(c<-10||c>10))return!1;s(a.currentTarget).removeClass(U);v(a)}function w(a){r.containerLocation=B.getBoundingClientRect().top;y(a)}function y(a){s(a.currentTarget).addClass(U);r.twisterControllerHandle&&(a=q(a.currentTarget),r.twisterControllerHandle.handleMouseOver(a))}function G(a){s(a.currentTarget).removeClass(U);
if(r.twisterControllerHandle){var c=q(a.currentTarget),a=x(a.currentTarget.id);r.twisterControllerHandle.handleMouseOut(c,r.dimensionOrder,a)}}function C(a){S.sort(function(c,b){var e=x(c.id),f=x(b.id);if(a[e][d.STRING_STYLE]!==a[f][d.STRING_STYLE])if(a[e][d.STRING_STYLE]===d.CLASS_FOR_VODD_UNAVAILABLE)return 1;else if(a[f][d.STRING_STYLE]===d.CLASS_FOR_VODD_UNAVAILABLE)return-1;return e-f});S.detach().appendTo(B)}function E(a){a=h.getDimStyleData(a,r.dimValuesDisplayData.length,r.dimensionOrder,
r.twisterControllerHandle.twisterAvailabilityCache,r.displayConfigStylesData);C(a);for(var c=null,b=0;b<a.length;b++){var e=a[b],f=B.find(X+b);if(e[d.STRING_STYLE]===d.CLASS_FOR_VODD_SELECT){if(c=f,f.addClass(W),la.text(r.dimValuesDisplayData[b]),V.length){var g=f.find("."+Da);g.length>0?V.prop("src",g.prop("src")).show():V.hide()}}else f.removeClass(W);f.removeClass(U);if(r.dimensionsMap.length>1){if(e[d.STRING_STYLE]!==d.CLASS_FOR_VODD_UNAVAILABLE)s(f).find("."+ma).hide(),s(f).find("."+Y).show();
else if(s(f).find("."+ma).show(),s(f).find("."+Y).hide(),s(f).find("."+na).length){s(f).find(".unavailableV1").addClass("aok-hidden");s(f).find(".unavailableV2").removeClass("aok-hidden");var k=f,e=r.initialTwisterState.getCurrentDimCombID().split("_"),g=[],m=parseInt(r.dimensionOrder),k=x(k[0].id);e[m]=k;for(var k=e.join("_"),k=r.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(k,m),k=Q[k],l=0;l<e.length;l++)m!==l&&g.push(Z[l][k[l]]);e=g.join(", ");s(f).find("."+oa).text(e);a:{m=f;
e=0;g=parseInt(r.dimensionOrder);m=parseInt(x(m[0].id));for(asin in Q)if(parseInt(Q[asin][g])===m&&++e>1){e=!0;break a}e=!1}e||s(f).find("."+na).hide()}else{e=r.initialTwisterState.getCurrentDimCombID().split("_");g=[];for(m=0;m<e.length;m++)parseInt(r.dimensionOrder)!==m&&(k=R[m].toLowerCase(),g.push(k+": "+Z[m][e[m]]));e=g.join(", ");s(f).find("."+oa).text(e)}s(f).find("."+ia).hide();s(f).find("."+ja).hide();s(f).find("."+ha).hide();s(f).find("."+fa).hide();s(f).find("."+ea).hide();s(f).find("."+
ga).hide();s(f).find("."+ka).hide();s(f).find("i."+da).addClass(T);s(f).find("i."+ca).addClass(T)}}a=B.find("tr");c=a.index(c);b=a.length-M;c>b?(c=b,c<0&&(c=0)):c=c==0?c:c-1;a=a.slice(c,c+M);j(a)}var r=this,s=n.$,J,I,Z,R,L,S,B,V,la,pa,qa,ra,sa,X,N,T="hidden",W="vodd-row-selected",U="vodd-row-hovered",Da="vodd-dimension-img",ka="lazy-loaded-data",Y="vodd-loading-placeholder",$="vodd-modified-popover",da="prime",ca="fresh",fa="price",ga="ppu",ha="sns",oa="variation-combination-text",na="variation-more-text",
ma="unavailable-text",ja="outofstock-text",ia="availability-message",ea="price-hidden",Aa=2E4,ua=200,za=",",aa,M=6,Ba=6,va=33,ya="377",K=!1,D,ba,Q,O,H,F,ta="TwisterVODD.showPopup",wa="TwisterVODD.hidePopup",xa="TwisterVODD.updatePopupPosition",Ca="TwisterVODD.dimensionRowClick";r.updateView=function(a){a[d.STRING_EVENT_TYPE]===d.EVENT_TYPE_CLICK&&(J&&J.hide(),E(a[d.STRING_DIM_COMB_ID]))};r.showVariationSelection=function(){h.isTouchDevice()||r.dimensionButton.trigger("click")};(function(){r.dimensionName=
m[d.STRING_DIM_NAME];r.dimensionOrder=m[d.STRING_DIM_ORDER];r.twisterControllerHandle=m[d.STRING_TWISTER_CONTROLLER_HANDLE];r.dimValuesDisplayData=m[d.STRING_DIMENSION_VALUES_DATA];r.displayConfigStylesData=m[d.STRING_DISPLAY_CONFIG_STYLES_DATA];r.initialTwisterState=m[d.STRING_TWISTER_INITIAL_STATE_KEY];r.dimensionsMap=m[d.STRING_DIMENSIONS_MAP];H=r.twisterControllerHandle.logger;F=H.eventTypes;Z=r.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;R=r.twisterControllerHandle.twisterJSInitData.dimensionsDisplay;
ba=r.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;Q=r.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;if(!r.initialTwisterState.asinDimensionValuesInfo)r.initialTwisterState.asinDimensionValuesInfo={};O=[];ra=d.ID_SELECTOR+"vodd-button-"+r.dimensionName;pa=d.ID_SELECTOR+"vodd-button-label-"+r.dimensionName;sa=d.ID_SELECTOR+"vodd-table-"+r.dimensionName;qa=d.ID_SELECTOR+"dimension-button-img-"+r.dimensionName;X=d.ID_SELECTOR+r.dimensionName+d.CHAR_UNDERSCORE;N="vodd-popover-"+
r.dimensionName;aa="/gp/twister/variationinfo?vs=1"+(r.twisterControllerHandle.twisterJSInitData.ajaxUrlParams?r.twisterControllerHandle.twisterJSInitData.ajaxUrlParams:"")+"&asinList=";r.dimensionButton=s(ra);B=s(sa);S=B.find("tr");V=s(qa);la=s(pa);c();E(r.initialTwisterState.getCurrentDimCombID());var a=Math.ceil(r.dimValuesDisplayData.length/M);H.logImpression(F.DIM_INIT,{count:a,dimDisplayType:d.TWISTER_DIMENSION_VIEW_VODD})})()}});q.when("A","twister-string-constants").register("twister-dimension-views-unavailablePopover",
function(n,h){function d(a,d,m,o,n){for(var e="",l=0;l<d.length;l++)l!==a&&d[l][h.STRING_IS_SELECTED]===1&&(e=e?e+", "+m[l]:m[l]);e="<strong>"+e+"</strong>";return n?o+"&nbsp;"+e:e+"&nbsp;"+o}var a=n.$;return{triggerPopover:function(b,k){var m=b[h.STRING_EVENT_DATA],o=m[h.STRING_EVENT_DIM_INFO],n=o[h.STRING_DIMENSIONS_MAP],e=m[h.STRING_EVENT_DIV_METADATA],l=e[h.STRING_DIM_INDEX],e=e[h.STRING_DIM_VALUE_INDEX];if(!(typeof touchDeviceDetected!=="undefined"&&touchDeviceDetected)){m=d(l,m[h.STRING_DIMENSION_SELECTION_DATA],
o[h.STRING_DIMENSION_DISPLAY_MAP],k[h.STRING_UNAVAILABLE_POPOVER_STRING_VALUE],k[h.STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER]);n=n[l]+"_"+e;l="ap_body";if(a.browser.msie||navigator.userAgent.match(/Trident/))l+=" styleIE";o=a("#"+n);a.AmazonPopover.displayPopover({modal:!1,showOnHover:!0,draggable:!1,showCloseButton:!1,hoverShowDelay:50,hoverHideDelay:0,width:null,closeEventInclude:"CLICK_TRIGGER",literalContent:m,skin:"<div id='twisterPopover' class='ap_popover twisterPopoverSkin a-text-color-white'><div class='ap_header'></div><div class='"+
l+"'><div class='ap_content'></div></div><div class='ap_footer'><div class='ap_middle'></div></div></div>",location:"top",locationElement:Twister.$("#"+n),align:"center",attached:!1,group:"TwisterPopover",locationOffset:[2,22],paddingLeft:5,paddingRight:5,paddingBottom:5,onShow:function(){var b=a("#twisterPopover").width();a.browser.msie?a("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({top:"16px",width:b-68+"px"}):a("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({width:b-
68+"px"})}},o);a("#"+n).trigger("mouseover.amzPopover")}}}});q.when("A","dp-js-logger").register("twister-logger-service",function(n,h){return function(d,a,b){var k=new h,m=b||"";this.logCounters=function(a){d.each(a,function(a,b){var d=m+":"+b.name;Twister.printConsoleLogs&&console.log("Logging metric: "+d+" -> "+b.value);k.logCounter(d,b.value)})};this.init=function(){var b=this;d(window).bind("beforeunload",function(){var d=a.getDataToUploadOnUnload();b.logCounters(d);return null})}}});q.when("A",
"twister-logger-service","twister-string-constants").register("twister-logger",function(n,h,d){return function(a,b){function k(a){if(!a)return null;var c=b.jsInteractionEnabledTime||Date.now();return(a[d.TWISTER_EVENT_DATA_TIME]||Date.now())-c}function m(a){if(a.hasOwnProperty("getMetricData"))return a.getMetricData();var c=a.stringVal,a=a.hasOwnProperty("getUploadValue")?a.getUploadValue():a.hasOwnProperty("currentValue")?a.currentValue:a.initValue;return isNaN(a)?null:{value:a,name:c}}var n=this,
p;this.createFunctionTimer=function(a){return{eventType:a,start:function(){this.startTime=Date.now()},stop:function(){n.logImpression(this.eventType,{duration:Date.now()-this.startTime})}}};this.eventTypes={CLICK:{metricList:["M_CLICK_COUNT","M_FIRST_CLICK"]},IMMERSIVE_OPTION_CLICK:{metricList:["M_IMMERSIVE_CLICK_COUNT"]},IMMERSIVE_SWATCH_CLICK:{metricList:["M_IMMERSIVE_SWATCH_CLICK_COUNT"]},IMMERSIVE_MODAL_CLOSE_CLICK:{metricList:["M_IMMERSIVE_CLOSE_CLICK_COUNT"]},IMMODAL_VISIBLE_SCROLLBAR:{metricList:["M_IMMERSIVE_VISIBLE_SCROLL_COUNT"]},
IMMODAL_FULL_SCROLL:{metricList:["M_IMMERSIVE_FULL_SCROLL_COUNT"]},HOVER:{metricList:["M_HOVER_COUNT","M_FIRST_HOVER"]},HOVER_OUT:[],CACHE_HIT:{metricList:["M_CACHE_HIT","M_CACHE_USED"]},CACHE_MISS:{metricList:["M_CACHE_MISS","M_CACHE_USED"]},PAGE_UNLOAD:{metricList:["M_CACHE_UNUSED","M_CACHE_HIT_RATIO","M_CACHE_USED_RATIO"]},REQ_DIM_CHANGED:{metricList:["M_OTHER_REQ_DIM_SELECTED_COUNT","M_REQ_DIM_CHANGE_COUNT"]},DIM_SUM_LOAD:{metricList:["M_DIM_SUM_LOAD"]},CLICK_NA:{metricList:["M_NA_CLICK_COUNT"]},
DIM_INIT:{metricList:["M_DIM_PAGENATION_COUNT"]},SCROLL:{metricList:["M_VIEWED_DIM_COUNT"]},CLICK_VARIATION:{metricList:["M_DIM_CLICK_VIEWED_DIM_COUNT"]}};var e=function(b,c){this.stringVal=c;this.initValue=NaN;this.deferLogging=!0;this.pagenationCountName=b;this.updateFunction=function(a){var c=Math.ceil(a[d.TWISTER_EVENT_DATA_PERCENTAGE]/25)*25,b=a[d.TWISTER_EVENT_DATA_DIV_METADATA][d.STRING_DIM_INDEX];if(!this.metrics)this.metrics={};this.metrics[b]||(this.metrics[b]={});if((this.metrics[b].percentage||
0)<c)this.metrics[b].percentage=c;this.metrics[b].pageCount=a[d.TWISTER_EVENT_DATA_COUNT];this.metrics[b].dimDisplayType=a[d.TWISTER_EVENT_DATA_DISPLAY_TYPE];Twister.printConsoleLogs&&console.log(this.stringVal+": index - "+b+" page - "+this.metrics[b].pageCount+" percentage - "+this.metrics[b].percentage)};this.getMetricData=function(){if(this.metrics){var c=[],b=this;a.each(this.metrics,function(a,d){var e=b.pagenationCountName+d.pageCount;d.dimDisplayType&&(e=d.dimDisplayType+":"+e);c.push({name:e+
"_"+(b.stringVal+d.percentage),value:1})});return c}}},l={M_CACHE_HIT:{stringVal:"CacheHit",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue=this.currentValue>0?this.currentValue+1:1;Twister.printConsoleLogs&&console.log("incrementing cacheHit count to "+this.currentValue)}},M_CACHE_MISS:{stringVal:"CacheMiss",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue=this.currentValue>0?this.currentValue+1:1}},M_CACHE_HIT_RATIO:{stringVal:"CacheHitRatio",initValue:NaN,
deferLogging:!0,updateFunction:function(){var a=n.getMetricCurrentValue("M_CACHE_HIT"),c=n.getMetricCurrentValue("M_CACHE_MISS");if(a||c)this.currentValue=Math.round(a/(a+c)*100)}},M_CACHE_USED:{stringVal:"CacheUsed",initValue:0,deferLogging:!0,updateFunction:function(a){if(!this.currentValue)this.currentValue=this.initValue,this.usedIdCache={};a=a.id;this.usedIdCache.hasOwnProperty(a)||(this.currentValue++,this.usedIdCache[a]=!0)}},M_CACHE_UNUSED:{stringVal:"CacheUnused",initValue:0,deferLogging:!0,
updateFunction:function(){var a=b.twisterModel.pageRefresh.getModelCacheSize("full")-n.getMetricCurrentValue("M_CACHE_USED");this.currentValue=a<0?0:a}},M_CACHE_USED_RATIO:{stringVal:"CacheUsedRatio",initValue:NaN,deferLogging:!0,updateFunction:function(){var a=n.getMetricCurrentValue("M_CACHE_USED"),c=n.getMetricCurrentValue("M_CACHE_UNUSED");if(a||c)this.currentValue=Math.round(a/(a+c)*100)}},M_FIRST_CLICK:{stringVal:"FirstClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){if(!this.firstClickLogged)this.currentValue=
k(a),Twister.printConsoleLogs&&console.log("first click = "+this.currentValue),this.firstClickLogged=!0}},M_CLICK_COUNT:{stringVal:"ClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue=1;Twister.printConsoleLogs&&console.log("incrementing click count to "+this.currentValue)}},M_HOVER_COUNT:{stringVal:"HoverCount",initValue:0,deferLogging:!0,updateFunction:function(a){a=a.divMetaData;if(!this.lastHoveredDivMetaData||!a||!(this.lastHoveredDivMetaData.dimIndex===a.dimIndex&&
this.lastHoveredDivMetaData.dimValueIndex===a.dimValueIndex))this.lastHoveredDivMetaData=a,this.currentValue=this.currentValue>0?this.currentValue+1:1,Twister.printConsoleLogs&&console.log("incrementing hover count to "+this.currentValue)}},M_FIRST_HOVER:{stringVal:"FirstHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){if(!this.firstHoverLogged)this.currentValue=k(a),Twister.printConsoleLogs&&console.log("first hover = "+this.currentValue),this.firstHoverLogged=!0}},M_OTHER_REQ_DIM_SELECTED_COUNT:{stringVal:"OtherReqDimSelectedCount",
initValue:NaN,deferLogging:!0,updateFunction:function(a){var c=a.newReqDimValueIndex,a=a.oldReqDimValueIndex;if(c==="X"){if(!this.currentValue)this.lastReqDimValueIndex=a,this.currentValue=0}else if(this.lastReqDimValueIndex!==c)this.lastReqDimValueIndex=c,!this.currentValue&&this.currentValue!==0?a==="X"?this.currentValue=0:this.currentValue=1:this.currentValue++,Twister.printConsoleLogs&&console.log("OtherReqDimSelectedCount incremented to : "+this.currentValue)}},M_REQ_DIM_CHANGE_COUNT:{stringVal:"ReqDimChangeCount",
initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("ReqDimChangeCount incremented to : "+this.currentValue)):this.currentValue=1}},M_DIM_SUM_LOAD:{stringVal:"DimSumLoadingDuration",initValue:NaN,deferLogging:!1,updateFunction:function(a){this.currentValue=a[d.TWISTER_EVENT_DATA_DURATION];Twister.printConsoleLogs&&console.log("DimSumLoadingDuration: "+this.currentValue)}},M_NA_CLICK_COUNT:{stringVal:"NAClickCount",initValue:NaN,
deferLogging:!0,updateFunction:function(){this.currentValue=(this.currentValue||0)+1;Twister.printConsoleLogs&&console.log("NAClick incremented to: "+this.currentValue)}},M_DIM_PAGENATION_COUNT:{stringVal:"DimPageCount",initValue:1,deferLogging:!1,updateFunction:function(a){this.pageCount=a[d.TWISTER_EVENT_DATA_COUNT]||1;this.dimDisplayType=a[d.TWISTER_EVENT_DATA_DISPLAY_TYPE];Twister.printConsoleLogs&&console.log("DimPageCount: "+this.pageCount)},getMetricData:function(){var a=this.stringVal+(this.pageCount||
1);this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:1}}},M_VIEWED_DIM_COUNT:new e("DimPageCount","ViewedVariationCount"),M_DIM_CLICK_VIEWED_DIM_COUNT:new e("DimPageCount","ViewedVariationCountBeforeClick"),M_IMMERSIVE_CLICK_COUNT:{stringVal:"ImmersiveClickCount",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Click Count incremented to : "+this.currentValue)):this.currentValue=1}},
M_IMMERSIVE_SWATCH_CLICK_COUNT:{stringVal:"ImmersiveSwatchClickCount",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive swatch click Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_CLOSE_CLICK_COUNT:{stringVal:"ImmersiveCloseClickCount",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal close click count : "+
this.currentValue)):this.currentValue=1}},M_IMMERSIVE_VISIBLE_SCROLL_COUNT:{stringVal:"ImmersiveScrollBarCount",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal scrollBar count : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_FULL_SCROLL_COUNT:{stringVal:"ImmersiveFullScrollCount",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&
console.log("Immersive modal full scroll down count : "+this.currentValue)):this.currentValue=1}}};this.init=function(){p=new h(a,this,"");p.init()};this.logImpression=function(b,c){try{a.each(b.metricList,function(a,b){try{var d=l[b];d.updateFunction(c);l[b].deferLogging||p.logCounters(Array(m(d)))}catch(e){Twister.printConsoleLogs&&console.log("metricUpdate failing for metric = "+b)}})}catch(d){Twister.printConsoleLogs&&console.log("logImpression failed")}};this.getDataToUploadOnUnload=function(){this.logImpression(this.eventTypes.PAGE_UNLOAD);
var b=[];a.each(l,function(c,d){try{if(d.deferLogging){var e=m(d);e&&(a.isArray(e)?b=a.merge(e,b):b.push(e))}}catch(h){}});return b};this.getMetricCurrentValue=function(a){try{return l[a].hasOwnProperty("currentValue")?l[a].currentValue:l[a].initValue}catch(c){return l[a].initValue}}}});q.when("A").register("twister-availabilty-cache",function(){return function(n){function h(b,d){var m=b+":"+d,n=b.split("_"),p=n.length,e=-1,l,f;if(a.asinToRenderCache[m]!==null&&a.asinToRenderCache[m]!==void 0)return a.asinToRenderCache[m];
a.intermediateAsinToRenderCache[m]=!0;for(m=0;m<p;m++)if(n[m]==="X"){e=m;break}if(e===-1)return l=null,a.twisterVariationsData.dimToAsinMapData[b]!=null&&(l=a.twisterVariationsData.dimToAsinMapData[b]),l;for(var p=a.twisterVariationsData.dimensionValuesData[e].length,c=0;c<p;c++)if(n[e]=c,m=n.join("_"),f=m+":"+d,!a.intermediateAsinToRenderCache.hasOwnProperty(f)&&(l=h(m,d),l!==null&&l!==void 0))break;return l}function d(b){for(var d in a.intermediateAsinToRenderCache)a.asinToRenderCache[d]=b,delete a.intermediateAsinToRenderCache[d];
a.intermediateAsinToRenderCache={}}var a=this;a.twisterVariationsData=n;a.dimAvailabilityCache={};a.asinToRenderCache={};a.intermediateAsinToRenderCache={};a.isUpdateCacheReq=!1;a.isDimCombinationAvailable=function(b){var d=b.split("_"),h,n=-1,p,e;h=d.length;if(a.dimAvailabilityCache[b]!==null&&a.dimAvailabilityCache[b]!==void 0)return a.dimAvailabilityCache[b];for(e=0;e<h;e++)if(d[e]==="X"){n=e;break}if(n===-1)return p=!1,a.twisterVariationsData.dimToAsinMapData[b]!==null&&a.twisterVariationsData.dimToAsinMapData[b]!==
void 0&&(p=!0),a.dimAvailabilityCache[b]=p;h=a.twisterVariationsData.dimensionValuesData[n].length;for(var l=0;l<h;l++)if(d[n]=l,e=d.join("_"),a.dimAvailabilityCache[e]!==null&&a.dimAvailabilityCache[e]!==void 0?p=a.dimAvailabilityCache[e]:(p=a.isDimCombinationAvailable(e),a.dimAvailabilityCache[e]=p),p)break;return a.dimAvailabilityCache[b]=p};a.gAsinToRender=function(b,k){var m=null,n,p,e=b.split("_"),l=e.length,f=b+":"+k;if(a.asinToRenderCache[f]!==null&&a.asinToRenderCache[f]!==void 0){if(a.isUpdateCacheReq)d(a.asinToRenderCache[f]),
a.isUpdateCacheReq=!1;return a.asinToRenderCache[f]}if(!a.isUpdateCacheReq)a.isUpdateCacheReq=!0;a.intermediateAsinToRenderCache.hasOwnProperty(f)||(m=h(b,k));if(m!==null&&m!==void 0){if(a.isUpdateCacheReq)d(m),a.isUpdateCacheReq=!1;return m}for(f=0;f<l;f++)if(!(f==k||e[f]=="X"))if(m=e[f],e[f]="X",n=e.join("_"),p=n+":"+k,e[f]=m,!a.intermediateAsinToRenderCache.hasOwnProperty(p)&&(m=h(n,k),m!==null&&m!==void 0)){if(a.isUpdateCacheReq)d(m),a.isUpdateCacheReq=!1;return m}m=-1;for(f=0;f<l;f++)if(e[f]!==
"X"&&f!==k){m=f;break}if(m===-1)return"";e[m]="X";n=e.join("_");return a.gAsinToRender(n,k)}}});q.when("A","twister-modal","twister-string-constants","twister-logger").register("twister-dimension-views-ingress",function(n,h,d,a){return function(b){var k=this,m=n.$;k.dimensionData=b;k.logger=new a(m,this);k.logger.init();k.modalHandle=new h(b);k.ingressDiv="#"+d.TWISTER_INGRESS_ID_PREFIX+b.dimName;(function(){n.declarative(d.AUI_EVENT_FOR_INGRESS_PREFIX+b.dimOrder,[d.EVENT_TYPE_CLICK,d.EVENT_TYPE_TOUCHSTART],
function(a){a.type===d.EVENT_TYPE_CLICK&&(k.logger.logImpression(k.logger.eventTypes.IMMERSIVE_OPTION_CLICK,null),k.modalHandle.openTwisterModal())});m(document).ready(function(){m(document).click(function(a){var b=k.modalHandle.twisterModalDiv,e=m("#"+d.TWISTER_FEATURE_DIV_ID);a.target.id!=b.attr("id")&&!b.has(a.target).length&&a.target.id!=e.attr("id")&&!e.has(a.target).length&&k.modalHandle.closeTwisterModal()})})})()}});q.when("A","twister-utils","scroll-event-handler","twister-modal-resize-helper",
"twister-string-constants","twister-logger").register("twister-modal",function(n,h,d,a,b,k){window.MAX_AJAX_CONNECTIONS_ALLOWED=2;return function(d){function h(){var a=c.twisterFeatureDiv.height();c.twisterFeatureDiv.css({height:a+"px",visibility:"hidden"})}function p(){n.declarative(b.AUI_EVENT_CLOSE_MODAL_PREFIX+d.dimName,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_TOUCHSTART],function(a){a.type===b.EVENT_TYPE_CLICK&&(c.logger.logImpression(c.logger.eventTypes.IMMERSIVE_MODAL_CLOSE_CLICK,null),c.closeTwisterModal())});
g(document).keyup(function(a){a.keyCode==27&&c.closeTwisterModal()});c.twisterModalContentDiv.bind("scroll",function(){g(this).scrollTop()+g(this).innerHeight()>=this.scrollHeight?(c.logger.logImpression(c.logger.eventTypes.IMMODAL_FULL_SCROLL,null),g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(g(this).scrollTop()==0?g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("display","none"):g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("display",
"block"),g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});c.twisterModalContentDiv.live("DOMMouseScroll mousewheel  wheel",function(a){var d=g(this),e=this.scrollTop,f=this.scrollHeight,h=d.height(),k=a.originalEvent.wheelDelta;typeof k=="undefined"&&(k=-a.originalEvent.deltaY);var m=k>0,l=function(){a.stopPropagation();a.preventDefault();return a.returnValue=!1};if(!m&&-k>f-h-e)return c.logger.logImpression(c.logger.eventTypes.IMMODAL_FULL_SCROLL,null),
d.scrollTop(f),g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","none"),l();else if(m&&k>e)return g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("display","none"),d.scrollTop(0),l();else g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"),g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("display","block")})}function e(){var a=b.AUI_EVENT_VISIBILITY_PREFIX+c.dimName;g(b.ID_SELECTOR+
c.twisterModalDivId+" .swatches li").appear({force_process:!0,$window:c.twisterModalDiv,$scrollHandlerDiv:c.twisterModalContentDiv,eventToBeTriggered:a});n.on(a,function(a){for(a=a[0].slice(0);a.length;)c.requestStack.push(a.splice(0,c.maxSwatchLimitForImmersive));l()})}function l(){if(!(c.requestStack.length<=0)&&c.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){c.noOfOngoingConnections++;for(var a=c.requestStack.shift(),b=[],d=0,e=a.length;d<e;d++){var h=g(a[d]).find(".a-declarative"),k=
h.attr("data-action"),h=JSON.parse(h.attr("data-"+k)).dimValueIndex;b.push(h)}f(b);l()}}function f(a){var b={};b.indices=a;b.dimTriggeringDimSum=c.dimensionData.dimName;b.dimSubType=c.dimSubType;b.chunk=function(a){g(".twister_"+a.dimensionValue+" .twisterSlotDiv").html(a.Value.content.twisterSlotDiv)};b.success=function(){c.windowWidth<c.slotsEligibleWidth?c.resizeHelperHandle.fixSize(c.$twisterModalSwatches):c.resizeHelperHandle.fixSize(c.$swatches);c.noOfOngoingConnections--;l()};b.error=function(){c.noOfOngoingConnections--;
l()};b.abort=function(){c.noOfOngoingConnections--;l()};Twister.dimensionalSummaryModule.fetchDimSumData(b)}var c=this,g=n.$;c.dimensionData=d;c.centerColDivId=b.ID_SELECTOR+b.CENTER_COL_DIV_ID;c.centerColDiv=g(c.centerColDivId);c.twisterModalDivId=b.TWISTER_MODAL_ID_PREFIX+c.dimensionData.dimName;c.twisterModalDiv=g(b.ID_SELECTOR+c.twisterModalDivId);c.twisterModalContentDiv=g(b.ID_SELECTOR+b.MODAL_CONTENTDIV_PREFIX+c.dimensionData.dimName);c.twisterModalHeaderDiv=g(b.ID_SELECTOR+b.MODAL_HEADER_PREFIX+
c.dimensionData.dimName);c.twisterFeatureDiv=g(b.ID_SELECTOR+b.TWISTER_FEATURE_DIV_ID);c.$swatches=g("."+b.CLASSNAME_FOR_SWATCH);c.$twisterModalSwatches=g(".twisterModal ."+b.CLASSNAME_FOR_SWATCH);c.$subNav=g(b.ID_SELECTOR+"nav-subnav");c.requestStack=[];c.noOfOngoingConnections=0;c.isModalOpen=0;c.isSlotRowPopulated=!1;c.showModalFadeDuration=500;c.isIE8=g("html").hasClass("a-lt-ie9");c.slotsEligibleWidth=1100;c.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;
c.logger=new k(g,this);c.logger.init();c.dimName=c.dimensionData.dimName;c.dimValuesDisplayData=c.dimensionData.dimValuesDisplayData;c.noOfDimValues=c.dimValuesDisplayData.length;c.maxSwatchLimitForImmersive=c.dimensionData.maxSwatchLimitForImmersive;c.dimSubType=c.dimensionData.dimSubType;c.resizeHelperHandle=new a(c);c.closeTwisterModal=function(){if(c.isModalOpen)c.twisterFeatureDiv.css({height:"auto",visibility:"visible"}),c.isIE8?c.twisterModalDiv.css("display","none"):c.twisterModalDiv.fadeOut(c.showModalFadeDuration),
c.isModalOpen=0};c.openTwisterModal=function(){c.twisterModalDiv.parent().attr("id")!=="centerCol"&&(g(c.centerColDivId+" > hr").first().after(c.twisterModalDiv),p(),e());document.getElementById("twister");var a=c.$swatches,d=a.length,f;if(c.windowWidth<c.slotsEligibleWidth)for(var k=0;k<d;k++){var m=a[k].className.indexOf("twisterImages")>-1;if(f=a[k].querySelector(".twisterSlotDiv"))f.style.display="table-cell";if(m&&(f=a[k].querySelector(".twisterImageDivWrapper"))&&f.className.indexOf("twisterImageDiv ")==
-1)f.className="twisterImageDiv "+f.className}c.twisterModalDiv.css("display","block");a=c.twisterModalDiv.css("transition-duration");d=c.$twisterModalSwatches.css("transition-duration");a!=void 0&&(c.$twisterModalSwatches.css("transition-duration","0s"),c.twisterModalDiv.css("transition-duration","0s"));c.resizeHelperHandle.fixSize(c.$swatches);c.twisterModalDiv.css({"z-index":"100"});var l=g(b.ID_SELECTOR+b.TWISTER_FEATURE_DIV_ID+" .twisterSwatchWrapper"),k=l.first().parents("li")[0].getBoundingClientRect();
f=k.left;for(var m=k.top,n=0,q=1,l=l.length;q<l;q++){var y=g(b.ID_SELECTOR+"twister .twisterSwatchWrapper:eq("+q+")").parents("li")[0].getBoundingClientRect();if(Math.abs(m-y.top)>5)break;else n=y.right}f=n>0?n-f+55:k.right-f+55;c.setModalWidth(f);c.twisterModalContentDiv.css({"max-height":"420px"});k=g(".twisterModal_innerDiv ul").outerHeight()>g(".twisterModal_innerDiv").outerHeight()+15;navigator.platform.indexOf("Win")>-1&&k&&(f=parseInt(f)+25+"px",c.twisterModalDiv.css("width",f));k&&c.logger.logImpression(c.logger.eventTypes.IMMODAL_VISIBLE_SCROLLBAR,
null);k=document.getElementById("twister").querySelectorAll("."+b.CLASSNAME_FOR_SWATCH);f=k.length;if(c.windowWidth<c.slotsEligibleWidth)for(q=0;q<f;q++){n=k[q].querySelector(".twisterImageDiv");if(m=k[q].querySelector(".twisterSlotDiv"))m.style.display="none";if(n)n.className=n.className.replace("twisterImageDiv","");k[q].style.minHeight="";k[q].style.minWidth=""}c.twisterModalDiv.offset();c.twisterModalDiv.outerHeight();if(g(window).height()>500)c.isIE8?(m=c.twisterModalDiv.offset().top+document.documentElement.scrollTop+
c.twisterModalDiv.outerHeight(),f=c.twisterModalDiv.offset().top+document.documentElement.scrollTop,k=c.$subNav.offset().top+document.documentElement.scrollTop+c.$subNav.outerHeight()):(m=c.twisterModalDiv.offset().top+c.twisterModalDiv.outerHeight(),f=c.twisterModalDiv.offset().top,k=c.$subNav.offset().top+c.$subNav.outerHeight()),m>g(window).height()&&(m-=g(window).height(),f=f-m-30,m>0&&(f>k?c.twisterModalDiv.offset({top:f}):c.twisterModalDiv.offset({top:k+20})));c.isIE8?(offSetTopIngress=g("#twisterIngress:first").offset().top+
document.documentElement.scrollTop,offSetTopModal=g(".twisterModal:first").offset().top+document.documentElement.scrollTop):(offSetTopIngress=g("#twisterIngress:first").offset().top,offSetTopModal=g(".twisterModal:first").offset().top);k=g(".twisterModal:first").outerHeight();f=g("#twisterIngress:first").outerHeight();k=offSetTopIngress+f-(offSetTopModal+k);k>0&&(k+=offSetTopModal,g(".twisterModal:first").offset({top:k}));if(!c.isSlotRowPopulated){k=g(b.ID_SELECTOR+c.twisterModalDivId+" .twisterSwatchWrapper");
f=-1;n=m=0;for(q=k.length;n<q;n++){l=k[n].getBoundingClientRect();if(Math.abs(m-l.top)>5)f++,m=l.top;k[n].className=k[n].className+" slotRow_"+f}c.isSlotRowPopulated=!0}h();c.twisterModalContentDiv.get(0).scrollHeight>c.twisterModalContentDiv.get(0).clientHeight?g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"):g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","none");c.twisterModalDiv.css("display","none");a!=void 0&&
(c.$twisterModalSwatches.css("transition-duration",d),c.twisterModalDiv.css("transition-duration",a));c.twisterModalDiv.fadeIn(c.showModalFadeDuration);h();c.isModalOpen=1};c.setModalWidth=function(a){var d=c.twisterFeatureDiv.css("width"),a=parseInt(a);c.twisterModalDiv.css({width:a?a+"px":d});d=a?a:d;d-=30;g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("width",d+"px");g(b.ID_SELECTOR+c.twisterModalDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("width",d+"px")}}});q.when("A",
"twister-string-constants").register("twister-utils",function(n,h){var d=n.$,a=this,b={};a.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;(function(){for(var a="Array Object String Date RegExp Function Boolean Number Null Undefined".split(" "),d=0,h=a.length;d<h;d++)b["is"+a[d]]=function(a){return function(b){return Object.prototype.toString.call(b).slice(8,-1)===a}}(a[d])})();return{isSwatchSelected:function(a,b){var d="#"+b.dimensionsMap[a[h.STRING_DIM_INDEX]]+
"_"+a[h.STRING_DIM_VALUE_INDEX],p=[],e;if(n.$(d).is("li")){p=n.$(d);Twister.isImmersiveViewEnabled&&!(p.length>0)&&(p=n.$("."+h.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[h.STRING_DIM_INDEX]]+"_"+a[h.STRING_DIM_VALUE_INDEX]));for(var p=p.get(0).className.split(" "),d=0,l=p.length;d<l;d++){var f=p[d];if(f.indexOf("swatch")===0){e=f;break}}(e===h.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||e===h.CLASS_FOR_SWATCH_UNAVAILABLE)&&n.$("#twisterPopover.twisterPopoverSkin").hide();return e===h.CLASS_FOR_SWATCH_SELECT}else return!1},
isSmallerWidthScreen:function(){return a.windowWidth<1100?1:0},getAttachedClass:function(a,b){var o=a[h.STRING_DIM_VALUE_INDEX],p="#"+b+"_"+o;if(n.$(p).is("li")){var e=[],l,e=n.$(p);Twister.isImmersiveViewEnabled&&!(e.length>0)&&(e=d("."+h.TWISTER_SWATCH_CLASS_PREFIX+b+"_"+o));e=e.get(0).className.split(" ");o=0;for(p=e.length;o<p;o++){var f=e[o];if(f.indexOf("swatch")===0){l=f;break}}return l}else return p=h.NATIVE_DROPDOWN_DIV_PREFIX+b+"_"+o,n.$(p).attr("class")},htmlUnescape:function(a){return String(a).replace(/&quot;/g,
'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},getDimStyleData:function(a,b,d,n,e){for(var a=a.split("_"),l=[],f=a.slice(0),c,g,j=0;j<b;j++)g={},a[d]===j.toString()?c=h.STYLE_CLASS_TYPE_FOR_SELECTED:(f[d]=j,c=f.join("_"),c=(c=n.isDimCombinationAvailable(c))?h.STYLE_CLASS_TYPE_FOR_AVAILABLE:h.STYLE_CLASS_TYPE_FOR_INAVLID),c=e[c],g.style=c,l[j]=g;return l},getVisibleTableRows:function(a,b){var h=[],n=a.getBoundingClientRect();b||(b=d(a).find("tr"));if(b.length)for(var e=
0;e<b.length;e++){var l=b.get(e),f=l.getBoundingClientRect(),c=(f.bottom-f.top)/2,g=n.bottom+c;n.top-c<f.top&&g>f.bottom&&h.push(l);if(n.bottom<f.top)break}return h},reconstructCombinationWithDimValue:function(a,b,d){if(!a)return a;var n=a.split(h.CHAR_UNDERSCORE);if(b>=n.length)return a;n[b]=d;return n.join(h.CHAR_UNDERSCORE)},isTouchDevice:function(){return n.capabilities.touch},typeChecker:b}});q.when("A").register("twister-string-constants",function(){return{YES:"YES",NO:"NO",MTYPE_PARENT:"parent",
MTYPE_PARTIAL:"partial",MTYPE_FULL:"full",MTYPE_MASTER:"master",AUI_DROPDOWN_EVENT_PREFIX:"a:dropdown:selected:",AUI_EVENT_FOR_SWATCHTHUMB:"swatchthumb-action",CHAR_SEMICOLON:":",CHAR_UNDERSCORE:"_",CLASS_FOR_DROPDOWN_UNAVAILABLE:"dropdownUnavailable",CLASS_FOR_NEW_TWISTER_EVDD:"#newTwisterEVDD",CLASS_FOR_NON_JS_EVDD:"#nonJSEVDD",CLASS_FOR_SWATCH_AVAILABLE:"swatchAvailable",CLASS_FOR_SWATCH_HOVER:"swatchHover",CLASS_FOR_SWATCH_SELECT:"swatchSelect",CLASS_FOR_SWATCH_UNAVAILABLE:"swatchUnavailable",
CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:"swatchUnavailableHover",CLASS_FOR_VODD_AVAILABLE:"voddAvailable",CLASS_FOR_VODD_HOVER:"voddHover",CLASS_FOR_VODD_SELECT:"voddSelect",CLASS_FOR_VODD_UNAVAILABLE:"voddUnavailable",CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION:"dropdownSelect",DROPDOWN_DIV_NAME:"dropdown_selected_",EVENT_TYPE_DROPDOWN_CHANGE:"dropdownChange",EVENT_TYPE_CLICK:"click",EVENT_TYPE_MOUSEENTER:"mouseenter",EVENT_TYPE_MOUSELEAVE:"mouseleave",EVENT_TYPE_MOUSEDOWN:"mousedown",EVENT_TYPE_MOUSEOUT:"mouseOut",
EVENT_TYPE_MOUSEOVER:"mouseOver",EVENT_TYPE_TOUCHSTART:"touchstart",EVENT_TYPE_TOUCHEND:"touchend",ID_SELECTOR:"#",INDEX_FOR_SELECT_OPTION:"-1",INIT_DATA_ASIN_TO_DIM_INDEX_MAP:"asinToDimIndexMapData",INIT_DATA_DELETED_LANDING_ASIN_INFO:"deletedLandingAsinInfo",INIT_DATA_DIM_TO_ASIN_MAP:"dimToAsinMapData",INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA:"dimensionValuesDisplayData",INIT_DATA_DIMENSIONS_DISPLAY:"dimensionsDisplay",INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP:"dimensionsDisplayType",INIT_DATA_DIMENSIONS_MAP:"dimensions",
INIT_DATA_VARIATIONS_DISPLAY_LABELS:"variationDisplayLabels",NATIVE_DROPDOWN_DIV_PREFIX:"#native_",STRING_CSS_CLASS:"css_class",STRING_DIM_COMB_ID:"dimCombID",STRING_DIM_DATA:"dimData",STRING_DIM_INDEX:"dimIndex",STRING_DIM_NAME:"dimName",STRING_DIM_ORDER:"dimOrder",STRING_DIM_VALUE_INDEX:"dimValueIndex",STRING_DIMENSION_DISPLAY_MAP:"dimensionDisplayMap",STRING_DIMENSION_DISPLAY_STRING:"dimensionDisplayString",STRING_DIMENSION_SELECTION_DATA:"dimensionSelectionData",STRING_DIMENSION_VALUES_DATA:"dimensionValuesData",
STRING_DIMENSION_VALUES_DATA_GLOBAL:"dimensionValuesDataGlobal",STRING_DIMENSIONS_MAP:"dimensionsMap",STRING_DISPLAY_CONFIG_STYLES_DATA:"displayConfigStylesData",STRING_EVENT_DATA:"eventData",STRING_EVENT_DIM_DATA:"dimData",STRING_EVENT_DIM_INFO:"eventDimInfo",STRING_EVENT_DIV_METADATA:"divMetaData",STRING_EVENT_POPOVER_DATA:"popoverData",STRING_EVENT_TYPE:"eventType",STRING_HIDE_POPOVER:"hidePopover",STRING_HOVER_MS:"hoverMS",STRING_IS_REQUIRED:"isRequired",STRING_IS_SELECTED:"isSelected",STRING_NATIVE_CSS_CLASS:"native_css_class",
STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER:"showDimSecondUnavailablePopover",STRING_STYLE:"style",STRING_TWISTER_CONTROLLER_HANDLE:"twisterControllerHandle",STRING_TWISTER_INITIAL_STATE_KEY:"twisterInitialState",STRING_UNAVAILABLE_POPOVER_STRING_VALUE:"unavailablePopOverStringValue",STRING_USE_MS:"useMS",STYLE_CLASS_TYPE_FOR_AVAILABLE:"available",STYLE_CLASS_TYPE_FOR_INAVLID:"invalid",STYLE_CLASS_TYPE_FOR_SELECTED:"selected",TWISTER_DIMENSION_VIEW_DROPDOWN:"dropdown",TWISTER_DIMENSION_VIEW_EVDD:"etdd",
TWISTER_DIMENSION_VIEW_SINGLETON:"singleton",TWISTER_DIMENSION_VIEW_SWATCH:"swatch",TWISTER_DIMENSION_VIEW_VODD:"vodd",TWISTER_EVENT_DATA_DIV_METADATA:"divMetaData",TWISTER_EVENT_DATA_DISPLAY_TYPE:"dimDisplayType",TWISTER_EVENT_DATA_TIME:"time",TWISTER_EVENT_DATA_DURATION:"duration",TWISTER_EVENT_DATA_COUNT:"count",TWISTER_EVENT_DATA_PERCENTAGE:"percentage",TWISTER_EVENT_DATA_DIM_INDEX:"dimIndex",MODAL_SWATCH_PREFIX:"modal_",STRING_MAX_SWATCHES_IMMERSIVE_VIEW:"maxSwatchesForImmersiveView",TWISTER_SWATCH_CLASS_PREFIX:"twister_",
PRICE_SLOT_CLASS_NAME:"twister_swatch_price",CLASS_FOR_PRICE_SECONDARY:"a-color-secondary",CLASS_FOR_PRICE_SELECTED:"a-color-price",TWISTER_MODAL_ID_PREFIX:"twister_modal_",TWISTER_INGRESS_ID_PREFIX:"twister_ingress_",AUI_EVENT_FOR_INGRESS_PREFIX:"twister-ingress-click-",TWISTER_FEATURE_DIV_ID:"twister_feature_div",CENTER_COL_DIV_ID:"centerCol",MODAL_CONTENTDIV_PREFIX:"twister_modal_innerDiv_",MODAL_HEADER_PREFIX:"twister_modal_header_",DYNAMIC_STYLE_RULES_ID:"twisterSwatchWrapperDynaStyle",CLASSNAME_FOR_STYLERBOTTOM:"twisterModal_stylerBottom",
CLASSNAME_FOR_STYLERTOP:"twisterModal_stylerTop",CLASSNAME_FOR_SWATCH:"twisterSwatchWrapper",CLASSNAME_FOR_INGRESS:"twisterIngressWrapper",AUI_EVENT_CLOSE_MODAL_PREFIX:"close-twisterModal-",AUI_EVENT_VISIBILITY_PREFIX:"twister-appear-"}});q.when("A").register("twister-thumbnailModule",function(n){var h=n.$;return{attach:function(d){var a=h("#dropdown_selected_thumbnail_"+d),d=h("#dropdown_selected_"+d+" .a-button-inner");a.length>0&&d.length>0&&(a.detach(),d.append(a),a.attr("src")!=="#"&&a.show())},
update:function(d){var a=h("#native_dropdown_selected_"+d).val().split(",")[0];typeof a!=="undefined"&&a!=="-1"&&(a=h("#native_"+d+"_"+a),a=a.length>0?a.attr("data-a-image-source"):"",d=h("#dropdown_selected_thumbnail_"+d),d.length>0&&a!==""?(d.attr("src",a),d.show()):d.hide())},preloadAllThumbnails:function(d){if(d){var a=h("#native_dropdown_selected_"+d+" option"),d=h("#dropdown_selected_"+d).attr("data-a-class");a&&d&&d.indexOf("twister-image-dropdown")!==-1&&h.each(a,function(a,d){var h=d.getAttribute("data-a-image-source");
if(h)(new Image).src=h})}}}});q.when("A","twister-string-constants","scroll-event-handler").execute(function(n,h,d){(function(a){function b(b){function d(c,e){var f=a(e).get(0).getBoundingClientRect(),g=b.$window.get(0).getBoundingClientRect(),h=g.right-g.left,j=g.bottom-g.top;return g.top<f.top&&f.top<g.top+j&&g.left<f.left&&f.left<g.left+h}p=!1;for(var c=0,e=h.length;c<e;c++){var j=a(h[c]).filter(function(){return a(this).is(d)}).not(m);j.length>0&&(n.trigger(b.eventToBeTriggered,[j.clone()]),m=
m.add(j))}}var h=[],m=a(),o=!1,p=!1,e={interval:250,force_process:!1};a.fn.extend({appear:function(l){var f=a.extend({},e,l||{}),c=this.selector||this;if(!o){var g=function(){p||(p=!0,setTimeout(function(){b(f)},f.interval))};new d(200,l.$scrollHandlerDiv,g);l.$window.resize(g);o=!0}f.force_process&&setTimeout(function(){b(f)},f.interval);h.push(c);return a(c)}})})(n.$)});var G=function(n){for(var h={},n=n.substring(n.indexOf("?")+1).split("&"),d=0;d<n.length;d++){var a=n[d].split("=");a[0]&&a[0].length>=
0&&(h[decodeURIComponent(a[0])]=decodeURIComponent(a[1]))}return h},I=function(n){var h="",d;for(d in n)h=h+"&"+d+"="+n[d];return"?"+h},R=function(){if(window.location&&window.location.search&&window.history&&window.history.replaceState){var n=G(window.location.search),h=!1;"th"in n&&(n.th==2&&(h=!0),delete n.th,h||delete n.psc,n=I(n),window.history.replaceState({},document.title,window.location.pathname+n))}};q.when("A","twisterModule").execute(function(n){var h=n.$,d=n.state("twister-reminisce-state");
window.history&&window.history.replaceState&&d&&"isEnabled"in d&&DetailPage.StateController&&(h(window).bind("beforeunload",function(){var a,b,h=DetailPage.StateController.getState();if(h){b=a=!1;for(i=0;i<h.dimensionSelectionData.length;i++){var m=h.dimensionSelectionData[i];if(m.isRequired==1&&(b=!0,m.isSelected==0)){a=!0;break}}if(m=h.current_asin){var h="",n=G(window.location.search);d.isEnabled=="1"?(n.th="psc"in n?2:1,h=m,!a&&b&&(n.psc=1),a=I(n),b=window.location.pathname.replace(RegExp(d.landingAsin,
"i"),h)):(n.th=0,a=I(n),b=window.location.pathname);a&&b&&window.history.replaceState({},document.title,b+a)}}}),h(document).ready(function(){R()}))});R()})})(function(){var q=window.AmazonUIPageJS||P,G=q.attributeErrors;return G?G("DetailPageTwisterAssets"):q}());